/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { of } from 'rxjs';
import { map, delay, switchMap, catchError } from 'rxjs/operators';
import { copyToClipboard, mergeDeep } from './utils';
/**
 * Meta tags operator - Serialize meta tags into the sharer URL
 * @type {?}
 */
export var metaTagsOperators = [
    map(function (ref) {
        // Social network sharer URL */
        /** @type {?} */
        var SharerURL = ref.prop.share[ref.platform];
        if (SharerURL) {
            // object contains supported meta tags
            /** @type {?} */
            var metaTags = ref.prop.share.metaTags;
            // object contains meta tags values */
            /** @type {?} */
            var metaTagsValues_1 = ref.metaTags;
            /** @type {?} */
            var link = '';
            // Set each meta tag with user value
            if (metaTags) {
                link = Object.entries(metaTags).map(function (_a) {
                    var _b = tslib_1.__read(_a, 2), key = _b[0], metaTag = _b[1];
                    return metaTagsValues_1[key] ? metaTag + "=" + encodeURIComponent(metaTagsValues_1[key]) : '';
                }).join('&');
            }
            return SharerURL + link;
        }
        return;
    })
];
/**
 * Print button operator
 * @type {?}
 */
export var printOperators = [
    map(function (ref) { return ref.document.defaultView.print(); })
];
/**
 * Copy link to clipboard, used for copy button
 * @type {?}
 */
export var copyOperators = [
    map(function (ref) {
        // Disable the button
        ref.renderer.setStyle(ref.el, 'pointer-events', 'none');
        ref.temp = { text: ref.prop.text, icon: ref.prop.icon };
        ref.metaTags.url = decodeURIComponent(ref.metaTags.url);
        return ref;
    }),
    switchMap(function (ref) { return copyToClipboard(ref).pipe(map(function () {
        ref.prop.text = ref.prop.successText;
        ref.prop.icon = ref.prop.successIcon;
        return ref;
    }), catchError(function () {
        ref.prop.text = ref.prop.failText;
        ref.prop.icon = ref.prop.failIcon;
        return of(ref);
    })); }),
    map(function (ref) {
        ref.cd.markForCheck();
        return ref;
    }),
    delay(2000),
    map(function (ref) {
        // Enable the button
        ref.renderer.setStyle(ref.el, 'pointer-events', 'auto');
        // Reset copy button text and icon */
        ref.prop.text = ref.temp.text;
        ref.prop.icon = ref.temp.icon;
        ref.cd.markForCheck();
    })
];
/**
 * Add the share URL to message body, used for WhatsApp and Email buttons
 * @type {?}
 */
export var urlInMessageOperators = [
    map(function (ref) {
        /** @type {?} */
        var description = ref.metaTags.description;
        /** @type {?} */
        var url = ref.metaTags.url;
        /** @type {?} */
        var newRef = {
            metaTags: {
                description: description ? description + "\r\n" + url : url
            }
        };
        return mergeDeep(ref, newRef);
    })
];
/** @type {?} */
export var FacebookCountOperators = [
    map(function (res) { return +res.share.share_count; })
];
/** @type {?} */
export var PinterestCountOperators = [
    map(function (text) { return JSON.parse(text.replace(/^receiveCount\((.*)\)/, '$1')); }),
    map(function (res) { return +res.count; })
];
/** @type {?} */
export var TumblrCountOperators = [
    map(function (res) { return +res.response.note_count; })
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hhcmUub3BlcmF0b3JzLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQG5neC1zaGFyZS9jb3JlLyIsInNvdXJjZXMiOlsibGliL3NoYXJlLm9wZXJhdG9ycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxFQUFFLEVBQW9CLE1BQU0sTUFBTSxDQUFDO0FBQzVDLE9BQU8sRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQU8sTUFBTSxnQkFBZ0IsQ0FBQztBQUV4RSxPQUFPLEVBQUUsZUFBZSxFQUFFLFNBQVMsRUFBRSxNQUFNLFNBQVMsQ0FBQzs7Ozs7QUFLckQsTUFBTSxLQUFPLGlCQUFpQixHQUFpQztJQUM3RCxHQUFHLENBQUMsVUFBQyxHQUFtQjs7O1lBR2hCLFNBQVMsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDO1FBQzlDLElBQUksU0FBUyxFQUFFOzs7Z0JBR1AsUUFBUSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVE7OztnQkFHbEMsZ0JBQWMsR0FBRyxHQUFHLENBQUMsUUFBUTs7Z0JBRS9CLElBQUksR0FBRyxFQUFFO1lBQ2Isb0NBQW9DO1lBQ3BDLElBQUksUUFBUSxFQUFFO2dCQUNaLElBQUksR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFDLEVBQWM7d0JBQWQsMEJBQWMsRUFBYixXQUFHLEVBQUUsZUFBTztvQkFDaEQsT0FBQSxnQkFBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBSSxPQUFPLFNBQUksa0JBQWtCLENBQUMsZ0JBQWMsQ0FBQyxHQUFHLENBQUMsQ0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUFsRixDQUFrRixDQUNuRixDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUNiO1lBQ0QsT0FBTyxTQUFTLEdBQUcsSUFBSSxD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QUFDO0NBQ0g7O0FBRUQsTUFBTSxLQUFPLHNCQUFzQixHQUFpQztJQUNsRSxHQUFHLENBQUMsVUFBQyxHQUFRLElBQUssT0FBQSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUF0QixDQUFzQixDQUFDO0NBQzFDOztBQUVELE1BQU0sS0FBTyx1QkFBdUIsR0FBaUM7SUFDbkUsR0FBRyxDQUFDLFVBQUMsSUFBWSxJQUFLLE9BQUEsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLHVCQUF1QixFQUFFLElBQUksQ0FBQyxDQUFDLEVBQXZELENBQXVELENBQUM7SUFDOUUsR0FBRyxDQUFDLFVBQUMsR0FBUSxJQUFLLE9BQUEsQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFWLENBQVUsQ0FBQztDQUM5Qjs7QUFFRCxNQUFNLEtBQU8sb0JBQW9CLEdBQWlDO0lBQ2hFLEdBQUcsQ0FBQyxVQUFDLEdBQVEsSUFBSyxPQUFBLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQXhCLENBQXdCLENBQUM7Q0FDNUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBvZiwgT3BlcmF0b3JGdW5jdGlvbiB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBtYXAsIGRlbGF5LCBzd2l0Y2hNYXAsIGNhdGNoRXJyb3IsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgU2hhcmVCdXR0b25SZWYgfSBmcm9tICcuL3NoYXJlLm1vZGVscyc7XHJcbmltcG9ydCB7IGNvcHlUb0NsaXBib2FyZCwgbWVyZ2VEZWVwIH0gZnJvbSAnLi91dGlscyc7XHJcblxyXG4vKipcclxuICogTWV0YSB0YWdzIG9wZXJhdG9yIC0gU2VyaWFsaXplIG1ldGEgdGFncyBpbnRvIHRoZSBzaGFyZXIgVVJMXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgbWV0YVRhZ3NPcGVyYXRvcnM6IE9wZXJhdG9yRnVuY3Rpb248YW55LCBhbnk+W10gPSBbXHJcbiAgbWFwKChyZWY6IFNoYXJlQnV0dG9uUmVmKSA9PiB7XHJcblxyXG4gICAgLy8gU29jaWFsIG5ldHdvcmsgc2hhcmVyIFVSTCAqL1xyXG4gICAgY29uc3QgU2hhcmVyVVJMID0gcmVmLnByb3Auc2hhcmVbcmVmLnBsYXRmb3JtXTtcclxuICAgIGlmIChTaGFyZXJVUkwpIHtcclxuXHJcbiAgICAgIC8vIG9iamVjdCBjb250YWlucyBzdXBwb3J0ZWQgbWV0YSB0YWdzXHJcbiAgICAgIGNvbnN0IG1ldGFUYWdzID0gcmVmLnByb3Auc2hhcmUubWV0YVRhZ3M7XHJcblxyXG4gICAgICAvLyBvYmplY3QgY29udGFpbnMgbWV0YSB0YWdzIHZhbHVlcyAqL1xyXG4gICAgICBjb25zdCBtZXRhVGFnc1ZhbHVlcyA9IHJlZi5tZXRhVGFncztcclxuXHJcbiAgICAgIGxldCBsaW5rID0gJyc7XHJcbiAgICAgIC8vIFNldCBlYWNoIG1ldGEgdGFnIHdpdGggdXNlciB2YWx1ZVxyXG4gICAgICBpZiAobWV0YVRhZ3MpIHtcclxuICAgICAgICBsaW5rID0gT2JqZWN0LmVudHJpZXMobWV0YVRhZ3MpLm1hcCgoW2tleSwgbWV0YVRhZ10pID0+XHJcbiAgICAgICAgICBtZXRhVGFnc1ZhbHVlc1trZXldID8gYCR7bWV0YVRhZ309JHtlbmNvZGVVUklDb21wb25lbnQobWV0YVRhZ3NWYWx1ZXNba2V5XSl9YCA6ICcnXHJcbiAgICAgICAgKS5qb2luKCcmJyk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFNoYXJlclVSTCArIGxpbms7XHJcbiAgICB9XHJcbiAgICByZXR1cm47XHJcbiAgfSlcclxuXTtcclxuXHJcbi8qKlxyXG4gKiBQcmludCBidXR0b24gb3BlcmF0b3JcclxuICovXHJcbmV4cG9ydCBjb25zdCBwcmludE9wZXJhdG9yczogT3BlcmF0b3JGdW5jdGlvbjxhbnksIGFueT5bXSA9IFtcclxuICBtYXAoKHJlZjogU2hhcmVCdXR0b25SZWYpID0+IHJlZi5kb2N1bWVudC5kZWZhdWx0Vmlldy5wcmludCgpKVxyXG5dO1xyXG5cclxuLyoqXHJcbiAqIENvcHkgbGluayB0byBjbGlwYm9hcmQsIHVzZWQgZm9yIGNvcHkgYnV0dG9uXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgY29weU9wZXJhdG9yczogT3BlcmF0b3JGdW5jdGlvbjxhbnksIGFueT5bXSA9IFtcclxuICBtYXAoKHJlZjogU2hhcmVCdXR0b25SZWYpID0+IHtcclxuXHJcbiAgICAvLyBEaXNhYmxlIHRoZSBidXR0b25cclxuICAgIHJlZi5yZW5kZXJlci5zZXRTdHlsZShyZWYuZWwsICdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XHJcblxyXG4gICAgcmVmLnRlbXAgPSB7dGV4dDogcmVmLnByb3AudGV4dCwgaWNvbjogcmVmLnByb3AuaWNvbn07XHJcbiAgICByZWYubWV0YVRhZ3MudXJsID0gZGVjb2RlVVJJQ29tcG9uZW50KHJlZi5tZXRhVGFncy51cmwpO1xyXG4gICAgcmV0dXJuIHJlZjtcclxuICB9KSxcclxuICBzd2l0Y2hNYXAoKHJlZjogU2hhcmVCdXR0b25SZWYpID0+IGNvcHlUb0NsaXBib2FyZChyZWYpLnBpcGUoXHJcbiAgICBtYXAoKCkgPT4ge1xyXG4gICAgICByZWYucHJvcC50ZXh0ID0gcmVmLnByb3Auc3VjY2Vzc1RleHQ7XHJcbiAgICAgIHJlZi5wcm9wLmljb24gPSByZWYucHJvcC5zdWNjZXNzSWNvbjtcclxuICAgICAgcmV0dXJuIHJlZjtcclxuICAgIH0pLFxyXG4gICAgY2F0Y2hFcnJvcigoKSA9PiB7XHJcbiAgICAgIHJlZi5wcm9wLnRleHQgPSByZWYucHJvcC5mYWlsVGV4dDtcclxuICAgICAgcmVmLnByb3AuaWNvbiA9IHJlZi5wcm9wLmZhaWxJY29uO1xyXG4gICAgICByZXR1cm4gb2YocmVmKTtcclxuICAgIH0pXHJcbiAgKSksXHJcbiAgbWFwKChyZWY6IFNoYXJlQnV0dG9uUmVmKSA9PiB7XHJcbiAgICByZWYuY2QubWFya0ZvckNoZWNrKCk7XHJcbiAgICByZXR1cm4gcmVmO1xyXG4gIH0pLFxyXG4gIGRlbGF5KDIwMDApLFxyXG4gIG1hcCgocmVmOiBTaGFyZUJ1dHRvblJlZikgPT4ge1xyXG5cclxuICAgIC8vIEVuYWJsZSB0aGUgYnV0dG9uXHJcbiAgICByZWYucmVuZGVyZXIuc2V0U3R5bGUocmVmLmVsLCAncG9pbnRlci1ldmVudHMnLCAnYXV0bycpO1xyXG5cclxuICAgIC8vIFJlc2V0IGNvcHkgYnV0dG9uIHRleHQgYW5kIGljb24gKi9cclxuICAgIHJlZi5wcm9wLnRleHQgPSByZWYudGVtcC50ZXh0O1xyXG4gICAgcmVmLnByb3AuaWNvbiA9IHJlZi50ZW1wLmljb247XHJcbiAgICByZWYuY2QubWFya0ZvckNoZWNrKCk7XHJcbiAgfSlcclxuXTtcclxuXHJcbi8qKlxyXG4gKiBBZGQgdGhlIHNoYXJlIFVSTCB0byBtZXNzYWdlIGJvZHksIHVzZWQgZm9yIFdoYXRzQXBwIGFuZCBFbWFpbCBidXR0b25zXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgdXJsSW5NZXNzYWdlT3BlcmF0b3JzOiBPcGVyYXRvckZ1bmN0aW9uPGFueSwgYW55PltdID0gW1xyXG4gIG1hcCgocmVmOiBTaGFyZUJ1dHRvblJlZikgPT4ge1xyXG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSByZWYubWV0YVRhZ3MuZGVzY3JpcHRpb247XHJcbiAgICBjb25zdCB1cmwgPSByZWYubWV0YVRhZ3MudXJsO1xyXG4gICAgY29uc3QgbmV3UmVmOiBTaGFyZUJ1dHRvblJlZiA9IHtcclxuICAgICAgbWV0YVRhZ3M6IHtcclxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24gPyBgJHtkZXNjcmlwdGlvbn1cXHJcXG4ke3VybH1gIDogdXJsXHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gbWVyZ2VEZWVwKHJlZiwgbmV3UmVmKTtcclxuICB9KVxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IEZhY2Vib29rQ291bnRPcGVyYXRvcnM6IE9wZXJhdG9yRnVuY3Rpb248YW55LCBhbnk+W10gPSBbXHJcbiAgbWFwKChyZXM6IGFueSkgPT4gK3Jlcy5zaGFyZS5zaGFyZV9jb3VudClcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBQaW50ZXJlc3RDb3VudE9wZXJhdG9yczogT3BlcmF0b3JGdW5jdGlvbjxhbnksIGFueT5bXSA9IFtcclxuICBtYXAoKHRleHQ6IHN0cmluZykgPT4gSlNPTi5wYXJzZSh0ZXh0LnJlcGxhY2UoL15yZWNlaXZlQ291bnRcXCgoLiopXFwpLywgJyQxJykpKSxcclxuICBtYXAoKHJlczogYW55KSA9PiArcmVzLmNvdW50KVxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IFR1bWJsckNvdW50T3BlcmF0b3JzOiBPcGVyYXRvckZ1bmN0aW9uPGFueSwgYW55PltdID0gW1xyXG4gIG1hcCgocmVzOiBhbnkpID0+ICtyZXMucmVzcG9uc2Uubm90ZV9jb3VudClcclxuXTtcclxuIl19