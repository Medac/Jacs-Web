!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/common"),require("@angular/common/http"),require("@angular/platform-browser"),require("@angular/cdk/platform")):"function"==typeof define&&define.amd?define("@ngx-share/core",["exports","@angular/core","rxjs","rxjs/operators","@angular/common","@angular/common/http","@angular/platform-browser","@angular/cdk/platform"],e):e((t["ngx-share"]=t["ngx-share"]||{},t["ngx-share"].core={}),t.ng.core,t.rxjs,t.rxjs.operators,t.ng.common,t.ng.common.http,t.ng.platformBrowser,t.ng.cdk.platform)}(this,function(t,p,c,i,e,r,o,n){"use strict";var s=function(){return(s=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function a(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var o,n,i=r.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(o=i.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i["return"])&&r.call(i)}finally{if(n)throw n.error}}return s}function u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t}var l=new p.InjectionToken("SHARE_BUTTONS_CONFIG");function h(t){return t&&"object"==typeof t&&!Array.isArray(t)}function m(t){for(var e,r,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];if(!o.length)return t;var i=o.shift();if(h(t)&&h(i))for(var s in i)h(i[s])?(t[s]||Object.assign(t,((e={})[s]={},e)),m(t[s],i[s])):Object.assign(t,((r={})[s]=i[s],r));return m.apply(void 0,u([t],o))}var d=[i.map(function(t){var e=t.prop.share[t.platform];if(e){var r=t.prop.share.metaTags,n=t.metaTags,o="";return r&&(o=Object.entries(r).map(function(t){var e=a(t,2),r=e[0],o=e[1];return n[r]?o+"="+encodeURIComponent(n[r]):""}).join("&")),e+o}})],g=[i.map(function(t){return t.document.defaultView.print()})],f=[i.map(function(t){return t.renderer.setStyle(t.el,"pointer-events","none"),t.temp={text:t.prop.text,icon:t.prop.icon},t.metaTags.url=decodeURIComponent(t.metaTags.url),t}),i.switchMap(function(t){return function e(n){return c.of(n.metaTags.url).pipe(i.tap(function(t){var e=n.document.createElement("textarea");if(e.value=t,n.document.body.appendChild(e),"ios"===n.platform){var r=n.document.createRange();r.selectNodeContents(e);var o=n.document.defaultView.getSelection();o.removeAllRanges(),o.addRange(r),e.readOnly=!0,e.setSelectionRange(0,999999)}else e.select();n.document.execCommand("copy"),n.document.body.removeChild(e)}))}(t).pipe(i.map(function(){return t.prop.text=t.prop.successText,t.prop.icon=t.prop.successIcon,t}),i.catchError(function(){return t.prop.text=t.prop.failText,t.prop.icon=t.prop.failIcon,c.of(t)}))}),i.map(function(t){return t.cd.markForCheck(),t}),i.delay(2e3),i.map(function(t){t.renderer.setStyle(t.el,"pointer-events","auto"),t.prop.text=t.temp.text,t.prop.icon=t.temp.icon,t.cd.markForCheck()})],b=[i.map(function(t){var e=t.metaTags.description,r=t.metaTags.url;return m(t,{metaTags:{description:e?e+"\r\n"+r:r}})})],y=[i.map(function(t){return+t.share.share_count})],w=[i.map(function(t){return JSON.parse(t.replace(/^receiveCount\((.*)\)/,"$1"))}),i.map(function(t){return+t.count})],v=[i.map(function(t){return+t.response.note_count})],k={facebook:{type:"facebook",text:"Facebook",icon:["fab","facebook-f"],color:"#4267B2",share:{desktop:"https://www.facebook.com/sharer/sharer.php?",android:"https://www.facebook.com/sharer/sharer.php?",ios:"https://www.facebook.com/sharer/sharer.php?",operators:d,metaTags:{url:"u"}},count:{request:"http",url:"https://graph.facebook.com?id=",operators:y}},twitter:{type:"twitter",text:"Twitter",icon:["fab","twitter"],color:"#00acee",share:{desktop:"https://twitter.com/intent/tweet?",android:"https://twitter.com/intent/tweet?",ios:"https://twitter.com/intent/tweet?",operators:d,metaTags:{url:"url",description:"text",tags:"hashtags",via:"via"}}},google:{type:"google",text:"Google+",icon:["fab","google-plus-g"],color:"#DB4437",share:{desktop:"https://plus.google.com/share?",android:"https://plus.google.com/share?",ios:"https://plus.google.com/share?",metaTags:{url:"url"},operators:d}},linkedin:{type:"linkedin",text:"LinkedIn",icon:["fab","linkedin-in"],color:"#006fa6",share:{desktop:"http://www.linkedin.com/shareArticle?",android:"http://www.linkedin.com/shareArticle?",ios:"http://www.linkedin.com/shareArticle?",operators:d,metaTags:{url:"url",title:"title",description:"summary"}}},pinterest:{type:"pinterest",text:"Pinterest",icon:["fab","pinterest-p"],color:"#BD091D",share:{desktop:"https://in.pinterest.com/pin/create/button/?",android:"https://in.pinterest.com/pin/create/button/?",ios:"https://in.pinterest.com/pin/create/button/?",operators:d,metaTags:{url:"url",description:"description",image:"media"}},count:{request:"http",url:"https://api.pinterest.com/v1/urls/count.json?url=",args:{responseType:"text"},operators:w}},reddit:{type:"reddit",text:"Reddit",icon:["fab","reddit-alien"],color:"#FF4006",share:{desktop:"http://www.reddit.com/submit?",android:"http://www.reddit.com/submit?",ios:"http://www.reddit.com/submit?",operators:d,metaTags:{url:"url",title:"title"}}},tumblr:{type:"tumblr",text:"Tumblr",icon:["fab","tumblr"],color:"#36465D",share:{desktop:"http://tumblr.com/widgets/share/tool?",android:"http://tumblr.com/widgets/share/tool?",ios:"http://tumblr.com/widgets/share/tool?",operators:d,metaTags:{url:"canonicalUrl",description:"caption",tags:"tags"}},count:{request:"jsonp",url:"https://api.tumblr.com/v2/share/stats?url=",operators:v}},whatsapp:{type:"whatsapp",text:"WhatsApp",icon:["fab","whatsapp"],color:"#25D366",share:{desktop:"https://web.whatsapp.com/send?",android:"whatsapp://send?",ios:"whatsapp://send?",operators:u(b,d),metaTags:{description:"text"}}},messenger:{type:"messenger",text:"Messenger",icon:["fab","facebook-messenger"],color:"#0080FF",share:{android:"fb-messenger://share/?",ios:"fb-messenger://share/?",operators:d,metaTags:{url:"link"}}},telegram:{type:"telegram",text:"Telegram",icon:["fab","telegram-plane"],color:"#0088cc",share:{desktop:"https://t.me/share/url?",android:"https://t.me/share/url?",ios:"https://t.me/share/url?",operators:d,metaTags:{url:"url",description:"text"}}},vk:{type:"vk",text:"VKontakte",icon:["fab","vk"],color:"#4C75A3",share:{desktop:"http://vk.com/share.php?",android:"http://vk.com/share.php?",ios:"http://vk.com/share.php?",operators:d,metaTags:{url:"url"}}},stumble:{type:"stumble",text:"Stumble",icon:["fab","stumbleupon"],color:"#eb4924",share:{desktop:"http://www.stumbleupon.com/submit?",android:"http://www.stumbleupon.com/submit?",ios:"http://www.stumbleupon.com/submit?",operators:d,metaTags:{url:"url"}}},xing:{type:"xing",text:"Xing",icon:["fab","xing"],color:"#006567",share:{desktop:"https://www.xing.com/app/user?op=share&",android:"https://www.xing.com/app/user?op=share&",ios:"https://www.xing.com/app/user?op=share&",operators:d,metaTags:{url:"url"}}},sms:{type:"sms",text:"SMS",icon:"comment-alt",color:"#20c16c",share:{desktop:"sms:?",android:"sms:?",ios:"sms:&",metaTags:{description:"body"},operators:u(b,d)}},email:{type:"email",text:"Email",icon:"envelope",color:"#FF961C",share:{desktop:"mailto:?",android:"mailto:?",ios:"mailto:?",operators:u(b,d),metaTags:{title:"subject",description:"body"}}},copy:{type:"copy",text:"Copy link",successText:"Copied",successIcon:"check",failText:"Error",failIcon:"exclamation",icon:"link",color:"#607D8B",share:{operators:f}},print:{type:"print",text:"Print",icon:"print",color:"#765AA2",share:{operators:g}}},x=function(){function t(t){this.config={prop:k,options:{theme:"default",include:[],exclude:[],size:0,url:null,title:null,description:null,image:null,tags:null,twitterAccount:null,autoSetMeta:!0,gaTracking:!1,windowWidth:800,windowHeight:500,moreButtonIcon:"ellipsis-h",lessButtonIcon:"minus"}},this.config$=new c.BehaviorSubject(this.config),this.setConfig(t)}return Object.defineProperty(t.prototype,"prop",{get:function(){return this.config.prop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"twitterAccount",{get:function(){return this.config.options.twitterAccount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"theme",{get:function(){return this.config.options.theme},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"windowSize",{get:function(){return"width="+this.config.options.windowWidth+", height="+this.config.options.windowHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this.config.options.url},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.config.options.title},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this.config.options.description},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"image",{get:function(){return this.config.options.image},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tags",{get:function(){return this.config.options.tags},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoSetMeta",{get:function(){return this.config.options.autoSetMeta},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gaTracking",{get:function(){return this.config.options.gaTracking},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.config.options.size},enumerable:!0,configurable:!0}),t.prototype.setConfig=function(t){t&&(this.config=m(this.config,t),this.config$.next(this.config))},t.prototype.addButton=function(t,e){var r,o={prop:s({},k,(r={},r[t]=e,r))};this.setConfig(o)},t.decorators=[{type:p.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:undefined,decorators:[{type:p.Optional},{type:p.Inject,args:[l]}]}]},t.ngInjectableDef=p.defineInjectable({factory:function(){return new t(p.inject(l,8))},token:t,providedIn:"root"}),t}(),T=function(){function t(t,e,r,o,n,i,s,a){this.meta=t,this.el=e,this.http=r,this.platform=o,this.renderer=n,this.cd=i,this.shareService=s,this.document=a,this._shareWindowClosed=c.Subscription.EMPTY,this.getCount=!1,this.autoSetMeta=this.shareService.autoSetMeta,this.url=this.shareService.url,this.title=this.shareService.title,this.description=this.shareService.description,this.image=this.shareService.image,this.tags=this.shareService.tags,this.count=new p.EventEmitter,this.opened=new p.EventEmitter,this.closed=new p.EventEmitter}return t.prototype.onClick=function(){var t,e=this;if(this.platform.isBrowser){var r=this.autoSetMeta?{url:this.url,title:this.title||this.getMetaTagContent("og:title"),description:this.description||this.getMetaTagContent("og:description"),image:this.image||this.getMetaTagContent("og:image"),via:this.shareService.twitterAccount,tags:this.tags}:{url:this.url,title:this.title,description:this.description,image:this.image,tags:this.tags,via:this.shareService.twitterAccount};(t=c.of({el:this.el.nativeElement,renderer:this.renderer,prop:this.prop,cd:this.cd,document:this.document,platform:this.getPlatform(),metaTags:r})).pipe.apply(t,u(this.prop.share.operators,[i.tap(function(t){return e.share(t)}),i.take(1)])).subscribe()}},t.prototype.ngOnChanges=function(t){var e=this;this.platform.isBrowser&&(t.shareButton&&(t.shareButton.firstChange||t.shareButton.previousValue!==this.shareButton)&&this.createShareButton(this.shareButton),(!this.url||t.url&&t.url.previousValue!==this.url)&&(this.url=function r(t,e){if(t){if(/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(t))return t;console.warn("[ShareButtons]: Sharing link '"+t+"' is invalid!")}return e}(this.autoSetMeta?this.url||this.getMetaTagContent("og:url"):this.url,this.document.defaultView.location.href),this.getCount&&this.prop.count&&this.shareCount(this.url).subscribe(function(t){return e.count.emit(t)})))},t.prototype.ngOnDestroy=function(){this._shareWindowClosed.unsubscribe()},t.prototype.share=function(t){var e=this;t&&(this.shareService.gaTracking&&this.document.defaultView.ga&&this.document.defaultView.ga("send","social",this.prop.type,"click",this.url),this._shareWindowClosed=c.of(this.document.defaultView.open(t,"newwindow",this.shareService.windowSize)).pipe(i.tap(function(){return e.opened.emit(e.prop.type)}),i.switchMap(function(t){return c.interval(200).pipe(i.takeWhile(function(){return!t.closed}))}),i.finalize(function(){return e.closed.emit(e.prop.type)})).subscribe())},t.prototype.shareCount=function(t){var e,r,o=this.prop.count;return"jsonp"===o.request?(e=this.http.jsonp(o.url+t,"callback")).pipe.apply(e,u(o.operators,[i.catchError(function(){return c.EMPTY})])):(r=this.http.get(o.url+t,o.args)).pipe.apply(r,u(o.operators,[i.catchError(function(){return c.EMPTY})]))},t.prototype.createShareButton=function(t){var e=s({},this.shareService.prop[t]);if(!e)throw new Error("[ShareButtons]: The share button '"+t+"' does not exist!");this.prop=e,this.renderer.removeClass(this.el.nativeElement,"sb-"+this._buttonClass),this.renderer.addClass(this.el.nativeElement,"sb-"+e.type),this.el.nativeElement.style.setProperty("--button-color",this.prop.color),this._buttonClass=e.type,this.renderer.setAttribute(this.el.nativeElement,"aria-label",e.ariaLabel||e.text)},t.prototype.getMetaTagContent=function(t){var e=this.meta.getTag('property="'+t+'"');if(e)return e.getAttribute("content");var r=this.meta.getTag('name="'+t+'"');return r?r.getAttribute("content"):void 0},t.prototype.getPlatform=function(){return this.platform.IOS?"ois":this.platform.ANDROID?"android":"desktop"},t.decorators=[{type:p.Directive,args:[{selector:"[shareButton], [share-button]"}]}],t.ctorParameters=function(){return[{type:o.Meta},{type:p.ElementRef},{type:r.HttpClient},{type:n.Platform},{type:p.Renderer2},{type:p.ChangeDetectorRef},{type:x},{type:undefined,decorators:[{type:p.Inject,args:[e.DOCUMENT]}]}]},t.propDecorators={shareButton:[{type:p.Input}],getCount:[{type:p.Input}],autoSetMeta:[{type:p.Input}],url:[{type:p.Input}],title:[{type:p.Input}],description:[{type:p.Input}],image:[{type:p.Input}],tags:[{type:p.Input}],count:[{type:p.Output}],opened:[{type:p.Output}],closed:[{type:p.Output}],onClick:[{type:p.HostListener,args:["click"]}]},t}(),S=function(){function t(){}return t.prototype.transform=function(t,e){return function i(t,e){for(var r=[{value:1e9,symbol:"B"},{value:1e6,symbol:"M"},{value:1e3,symbol:"K"}],o=/\.0+$|(\.[0-9]*[1-9])0+$/,n=0;n<r.length;n++)if(t>=r[n].value)return(t/r[n].value).toFixed(e).replace(o,"$1")+r[n].symbol;return t.toFixed(e).replace(o,"$1")}(t,e)},t.decorators=[{type:p.Pipe,args:[{name:"shareCount"}]}],t}(),C=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:l,useValue:t}]}},e.decorators=[{type:p.NgModule,args:[{imports:[n.PlatformModule],declarations:[T,S],exports:[T,S]}]}],e}();t.ShareModule=C,t.ShareService=x,t.ShareDirective=T,t.metaTagsOperators=d,t.printOperators=g,t.copyOperators=f,t.urlInMessageOperators=b,t.FacebookCountOperators=y,t.PinterestCountOperators=w,t.TumblrCountOperators=v,t.shareButtonsProp=k,t.CONFIG=l,t.ShareCountPipe=S,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-share-core.umd.min.js.map