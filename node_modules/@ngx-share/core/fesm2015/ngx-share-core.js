import { InjectionToken, Inject, Injectable, Optional, NgModule, Directive, Input, Output, HostListener, EventEmitter, ElementRef, Renderer2, ChangeDetectorRef, Pipe, defineInjectable, inject } from '@angular/core';
import { of, BehaviorSubject, interval, Subscription, EMPTY } from 'rxjs';
import { tap, map, delay, switchMap, catchError, take, takeWhile, finalize } from 'rxjs/operators';
import { DOCUMENT } from '@angular/common';
import { HttpClient } from '@angular/common/http';
import { Meta } from '@angular/platform-browser';
import { Platform, PlatformModule } from '@angular/cdk/platform';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */
/** @type {?} */
const CONFIG = new InjectionToken('SHARE_BUTTONS_CONFIG');

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */
/**
 * Simple object check.
 * @param {?} item
 * @return {?}
 */
function isObject(item) {
    return (item && typeof item === 'object' && !Array.isArray(item));
}
/**
 * Deep merge two objects.
 * @param {?} target
 * @param {...?} sources
 * @return {?}
 */
function mergeDeep(target, ...sources) {
    if (!sources.length) {
        return target;
    }
    /** @type {?} */
    const source = sources.shift();
    if (isObject(target) && isObject(source)) {
        for (const key in source) {
            if (isObject(source[key])) {
                if (!target[key]) {
                    Object.assign(target, { [key]: {} });
                }
                mergeDeep(target[key], source[key]);
            }
            else {
                Object.assign(target, { [key]: source[key] });
            }
        }
    }
    return mergeDeep(target, ...sources);
}
/**
 * Returns a readable number from share count
 * @param {?} num
 * @param {?} digits
 * @return {?}
 */
function shareCountFormatter(num, digits) {
    /** @type {?} */
    const si = [
        { value: 1E9, symbol: 'B' },
        { value: 1E6, symbol: 'M' },
        { value: 1E3, symbol: 'K' }
    ];
    /** @type {?} */
    const rx = /\.0+$|(\.[0-9]*[1-9])0+$/;
    for (let i = 0; i < si.length; i++) {
        if (num >= si[i].value) {
            return (num / si[i].value).toFixed(digits).replace(rx, '$1') + si[i].symbol;
        }
    }
    return num.toFixed(digits).replace(rx, '$1');
}
/**
 * Copy text to clipboard
 * @param {?} ref
 * @return {?}
 */
function copyToClipboard(ref) {
    return of(ref.metaTags.url).pipe(tap((url) => {
        // Create a hidden TextArea element
        /** @type {?} */
        const textArea = (/** @type {?} */ (ref.document.createElement('textarea')));
        textArea.value = url;
        ref.document.body.appendChild(textArea);
        // highlight TextArea to copy the text
        if (ref.platform === 'ios') {
            /** @type {?} */
            const range = ref.document.createRange();
            range.selectNodeContents(textArea);
            /** @type {?} */
            const selection = ref.document.defaultView.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            textArea.readOnly = true;
            textArea.setSelectionRange(0, 999999);
        }
        else {
            textArea.select();
        }
        ref.document.execCommand('copy');
        ref.document.body.removeChild(textArea);
    }));
}
/**
 * Returns a valid URL or falls back to current URL
 * @param {?} url
 * @param {?} fallbackUrl
 * @return {?}
 */
function getValidUrl(url, fallbackUrl) {
    if (url) {
        /** @type {?} */
        const r = /(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;
        if (r.test(url))
            return url;
        console.warn(`[ShareButtons]: Sharing link '${url}' is invalid!`);
    }
    return fallbackUrl;
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */
/**
 * Meta tags operator - Serialize meta tags into the sharer URL
 * @type {?}
 */
const metaTagsOperators = [
    map((ref) => {
        // Social network sharer URL */
        /** @type {?} */
        const SharerURL = ref.prop.share[ref.platform];
        if (SharerURL) {
            // object contains supported meta tags
            /** @type {?} */
            const metaTags = ref.prop.share.metaTags;
            // object contains meta tags values */
            /** @type {?} */
            const metaTagsValues = ref.metaTags;
            /** @type {?} */
            let link = '';
            // Set each meta tag with user value
            if (metaTags) {
                link = Object.entries(metaTags).map(([key, metaTag]) => metaTagsValues[key] ? `${metaTag}=${encodeURIComponent(metaTagsValues[key])}` : '').join('&');
            }
            return SharerURL + link;
        }
        return;
    })
];
/**
 * Print button operator
 * @type {?}
 */
const printOperators = [
    map((ref) => ref.document.defaultView.print())
];
/**
 * Copy link to clipboard, used for copy button
 * @type {?}
 */
const copyOperators = [
    map((ref) => {
        // Disable the button
        ref.renderer.setStyle(ref.el, 'pointer-events', 'none');
        ref.temp = { text: ref.prop.text, icon: ref.prop.icon };
        ref.metaTags.url = decodeURIComponent(ref.metaTags.url);
        return ref;
    }),
    switchMap((ref) => copyToClipboard(ref).pipe(map(() => {
        ref.prop.text = ref.prop.successText;
        ref.prop.icon = ref.prop.successIcon;
        return ref;
    }), catchError(() => {
        ref.prop.text = ref.prop.failText;
        ref.prop.icon = ref.prop.failIcon;
        return of(ref);
    }))),
    map((ref) => {
        ref.cd.markForCheck();
        return ref;
    }),
    delay(2000),
    map((ref) => {
        // Enable the button
        ref.renderer.setStyle(ref.el, 'pointer-events', 'auto');
        // Reset copy button text and icon */
        ref.prop.text = ref.temp.text;
        ref.prop.icon = ref.temp.icon;
        ref.cd.markForCheck();
    })
];
/**
 * Add the share URL to message body, used for WhatsApp and Email buttons
 * @type {?}
 */
const urlInMessageOperators = [
    map((ref) => {
        /** @type {?} */
        const description = ref.metaTags.description;
        /** @type {?} */
        const url = ref.metaTags.url;
        /** @type {?} */
        const newRef = {
            metaTags: {
                description: description ? `${description}\r\n${url}` : url
            }
        };
        return mergeDeep(ref, newRef);
    })
];
/** @type {?} */
const FacebookCountOperators = [
    map((res) => +res.share.share_count)
];
/** @type {?} */
const PinterestCountOperators = [
    map((text) => JSON.parse(text.replace(/^receiveCount\((.*)\)/, '$1'))),
    map((res) => +res.count)
];
/** @type {?} */
const TumblrCountOperators = [
    map((res) => +res.response.note_count)
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */
/** @type {?} */
const shareButtonsProp = {
    facebook: {
        type: 'facebook',
        text: 'Facebook',
        icon: ['fab', 'facebook-f'],
        color: '#4267B2',
        share: {
            desktop: 'https://www.facebook.com/sharer/sharer.php?',
            android: 'https://www.facebook.com/sharer/sharer.php?',
            ios: 'https://www.facebook.com/sharer/sharer.php?',
            operators: metaTagsOperators,
            metaTags: {
                url: 'u'
            }
        },
        count: {
            request: 'http',
            url: 'https://graph.facebook.com?id=',
            operators: FacebookCountOperators
        }
    },
    twitter: {
        type: 'twitter',
        text: 'Twitter',
        icon: ['fab', 'twitter'],
        color: '#00acee',
        share: {
            desktop: 'https://twitter.com/intent/tweet?',
            android: 'https://twitter.com/intent/tweet?',
            ios: 'https://twitter.com/intent/tweet?',
            operators: metaTagsOperators,
            metaTags: {
                url: 'url',
                description: 'text',
                tags: 'hashtags',
                via: 'via'
            }
        }
    },
    google: {
        type: 'google',
        text: 'Google+',
        icon: ['fab', 'google-plus-g'],
        color: '#DB4437',
        share: {
            desktop: 'https://plus.google.com/share?',
            android: 'https://plus.google.com/share?',
            ios: 'https://plus.google.com/share?',
            metaTags: {
                url: 'url',
            },
            operators: metaTagsOperators
        }
    },
    linkedin: {
        type: 'linkedin',
        text: 'LinkedIn',
        icon: ['fab', 'linkedin-in'],
        color: '#006fa6',
        share: {
            desktop: 'http://www.linkedin.com/shareArticle?',
            android: 'http://www.linkedin.com/shareArticle?',
            ios: 'http://www.linkedin.com/shareArticle?',
            operators: metaTagsOperators,
            metaTags: {
                url: 'url',
                title: 'title',
                description: 'summary'
            },
        }
    },
    pinterest: {
        type: 'pinterest',
        text: 'Pinterest',
        icon: ['fab', 'pinterest-p'],
        color: '#BD091D',
        share: {
            desktop: 'https://in.pinterest.com/pin/create/button/?',
            android: 'https://in.pinterest.com/pin/create/button/?',
            ios: 'https://in.pinterest.com/pin/create/button/?',
            operators: metaTagsOperators,
            metaTags: {
                url: 'url',
                description: 'description',
                image: 'media'
            }
        },
        count: {
            request: 'http',
            url: 'https://api.pinterest.com/v1/urls/count.json?url=',
            args: { responseType: 'text' },
            operators: PinterestCountOperators
        }
    },
    reddit: {
        type: 'reddit',
        text: 'Reddit',
        icon: ['fab', 'reddit-alien'],
        color: '#FF4006',
        share: {
            desktop: 'http://www.reddit.com/submit?',
            android: 'http://www.reddit.com/submit?',
            ios: 'http://www.reddit.com/submit?',
            operators: metaTagsOperators,
            metaTags: {
                url: 'url',
                title: 'title'
            },
        }
    },
    tumblr: {
        type: 'tumblr',
        text: 'Tumblr',
        icon: ['fab', 'tumblr'],
        color: '#36465D',
        share: {
            desktop: 'http://tumblr.com/widgets/share/tool?',
            android: 'http://tumblr.com/widgets/share/tool?',
            ios: 'http://tumblr.com/widgets/share/tool?',
            operators: metaTagsOperators,
            metaTags: {
                url: 'canonicalUrl',
                description: 'caption',
                tags: 'tags'
            }
        },
        count: {
            request: 'jsonp',
            url: 'https://api.tumblr.com/v2/share/stats?url=',
            operators: TumblrCountOperators
        }
    },
    whatsapp: {
        type: 'whatsapp',
        text: 'WhatsApp',
        icon: ['fab', 'whatsapp'],
        color: '#25D366',
        share: {
            desktop: 'https://web.whatsapp.com/send?',
            android: 'whatsapp://send?',
            ios: 'whatsapp://send?',
            operators: [
                ...urlInMessageOperators,
                ...metaTagsOperators
            ],
            metaTags: {
                description: 'text'
            }
        }
    },
    messenger: {
        type: 'messenger',
        text: 'Messenger',
        icon: ['fab', 'facebook-messenger'],
        color: '#0080FF',
        share: {
            android: 'fb-messenger://share/?',
            ios: 'fb-messenger://share/?',
            operators: metaTagsOperators,
            metaTags: {
                url: 'link'
            }
        }
    },
    telegram: {
        type: 'telegram',
        text: 'Telegram',
        icon: ['fab', 'telegram-plane'],
        color: '#0088cc',
        share: {
            desktop: 'https://t.me/share/url?',
            android: 'https://t.me/share/url?',
            ios: 'https://t.me/share/url?',
            operators: metaTagsOperators,
            metaTags: {
                url: 'url',
                description: 'text'
            }
        }
    },
    vk: {
        type: 'vk',
        text: 'VKontakte',
        icon: ['fab', 'vk'],
        color: '#4C75A3',
        share: {
            desktop: 'http://vk.com/share.php?',
            android: 'http://vk.com/share.php?',
            ios: 'http://vk.com/share.php?',
            operators: metaTagsOperators,
            metaTags: {
                url: 'url'
            }
        }
    },
    stumble: {
        type: 'stumble',
        text: 'Stumble',
        icon: ['fab', 'stumbleupon'],
        color: '#eb4924',
        share: {
            desktop: 'http://www.stumbleupon.com/submit?',
            android: 'http://www.stumbleupon.com/submit?',
            ios: 'http://www.stumbleupon.com/submit?',
            operators: metaTagsOperators,
            metaTags: {
                url: 'url'
            }
        }
    },
    xing: {
        type: 'xing',
        text: 'Xing',
        icon: ['fab', 'xing'],
        color: '#006567',
        share: {
            desktop: 'https://www.xing.com/app/user?op=share&',
            android: 'https://www.xing.com/app/user?op=share&',
            ios: 'https://www.xing.com/app/user?op=share&',
            operators: metaTagsOperators,
            metaTags: {
                url: 'url'
            }
        }
    },
    sms: {
        type: 'sms',
        text: 'SMS',
        icon: 'comment-alt',
        color: '#20c16c',
        share: {
            desktop: 'sms:?',
            android: 'sms:?',
            ios: 'sms:&',
            metaTags: {
                description: 'body'
            },
            operators: [
                ...urlInMessageOperators,
                ...metaTagsOperators
            ]
        }
    },
    email: {
        type: 'email',
        text: 'Email',
        icon: 'envelope',
        color: '#FF961C',
        share: {
            desktop: 'mailto:?',
            android: 'mailto:?',
            ios: 'mailto:?',
            operators: [
                ...urlInMessageOperators,
                ...metaTagsOperators
            ],
            metaTags: {
                title: 'subject',
                description: 'body'
            }
        }
    },
    copy: {
        type: 'copy',
        text: 'Copy link',
        successText: 'Copied',
        successIcon: 'check',
        failText: 'Error',
        failIcon: 'exclamation',
        icon: 'link',
        color: '#607D8B',
        share: {
            operators: copyOperators
        }
    },
    print: {
        type: 'print',
        text: 'Print',
        icon: 'print',
        color: '#765AA2',
        share: {
            operators: printOperators
        }
    }
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */
class ShareService {
    /**
     * @param {?} config
     */
    constructor(config) {
        this.config = {
            prop: shareButtonsProp,
            options: {
                theme: 'default',
                include: [],
                exclude: [],
                size: 0,
                url: null,
                title: null,
                description: null,
                image: null,
                tags: null,
                twitterAccount: null,
                autoSetMeta: true,
                gaTracking: false,
                windowWidth: 800,
                windowHeight: 500,
                moreButtonIcon: 'ellipsis-h',
                lessButtonIcon: 'minus'
            }
        };
        this.config$ = new BehaviorSubject(this.config);
        this.setConfig(config);
    }
    /**
     * @return {?}
     */
    get prop() {
        return this.config.prop;
    }
    /**
     * @return {?}
     */
    get twitterAccount() {
        return this.config.options.twitterAccount;
    }
    /**
     * @return {?}
     */
    get theme() {
        return this.config.options.theme;
    }
    /**
     * @return {?}
     */
    get windowSize() {
        return `width=${this.config.options.windowWidth}, height=${this.config.options.windowHeight}`;
    }
    /**
     * @return {?}
     */
    get url() {
        return this.config.options.url;
    }
    /**
     * @return {?}
     */
    get title() {
        return this.config.options.title;
    }
    /**
     * @return {?}
     */
    get description() {
        return this.config.options.description;
    }
    /**
     * @return {?}
     */
    get image() {
        return this.config.options.image;
    }
    /**
     * @return {?}
     */
    get tags() {
        return this.config.options.tags;
    }
    /**
     * @return {?}
     */
    get autoSetMeta() {
        return this.config.options.autoSetMeta;
    }
    /**
     * @return {?}
     */
    get gaTracking() {
        return this.config.options.gaTracking;
    }
    /**
     * @return {?}
     */
    get size() {
        return this.config.options.size;
    }
    /**
     * @param {?} config
     * @return {?}
     */
    setConfig(config) {
        if (config) {
            this.config = mergeDeep(this.config, config);
            this.config$.next(this.config);
        }
    }
    /**
     * @param {?} name
     * @param {?} data
     * @return {?}
     */
    addButton(name, data) {
        /** @type {?} */
        const config = {
            prop: Object.assign({}, shareButtonsProp, { [name]: data })
        };
        this.setConfig(config);
    }
}
ShareService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
/** @nocollapse */
ShareService.ctorParameters = () => [
    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [CONFIG,] }] }
];
/** @nocollapse */ ShareService.ngInjectableDef = defineInjectable({ factory: function ShareService_Factory() { return new ShareService(inject(CONFIG, 8)); }, token: ShareService, providedIn: "root" });

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */
class ShareDirective {
    /**
     * @param {?} meta
     * @param {?} el
     * @param {?} http
     * @param {?} platform
     * @param {?} renderer
     * @param {?} cd
     * @param {?} shareService
     * @param {?} document
     */
    constructor(meta, el, http, platform, renderer, cd, shareService, document) {
        this.meta = meta;
        this.el = el;
        this.http = http;
        this.platform = platform;
        this.renderer = renderer;
        this.cd = cd;
        this.shareService = shareService;
        this.document = document;
        /**
         * share window closed subscription (to unsubscribe if the button is destroyed before the share window closes)
         */
        this._shareWindowClosed = Subscription.EMPTY;
        /**
         * Get share count
         */
        this.getCount = false;
        /**
         * Set meta tags from document head, useful when SEO is supported
         */
        this.autoSetMeta = this.shareService.autoSetMeta;
        /**
         * Meta tags inputs - initialized from the global options
         */
        this.url = this.shareService.url;
        this.title = this.shareService.title;
        this.description = this.shareService.description;
        this.image = this.shareService.image;
        this.tags = this.shareService.tags;
        /**
         * Stream that emits when share count is fetched
         */
        this.count = new EventEmitter();
        /**
         * Stream that emits when share dialog is opened
         */
        this.opened = new EventEmitter();
        /**
         * Stream that emits when share dialog is closed
         */
        this.closed = new EventEmitter();
    }
    /**
     * Share link on element click
     * @return {?}
     */
    onClick() {
        if (this.platform.isBrowser) {
            /** @type {?} */
            const metaTags = this.autoSetMeta ? {
                url: this.url,
                title: this.title || this.getMetaTagContent('og:title'),
                description: this.description || this.getMetaTagContent('og:description'),
                image: this.image || this.getMetaTagContent('og:image'),
                via: this.shareService.twitterAccount,
                tags: this.tags,
            } : {
                url: this.url,
                title: this.title,
                description: this.description,
                image: this.image,
                tags: this.tags,
                via: this.shareService.twitterAccount,
            };
            // Share the link
            // @ts-ignore
            of({
                el: this.el.nativeElement,
                renderer: this.renderer,
                prop: this.prop,
                cd: this.cd,
                document: this.document,
                platform: this.getPlatform(),
                metaTags
            }).pipe(...this.prop.share.operators, tap((sharerURL) => this.share(sharerURL)), take(1)).subscribe();
        }
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        if (this.platform.isBrowser) {
            if (changes['shareButton'] && (changes['shareButton'].firstChange || changes['shareButton'].previousValue !== this.shareButton)) {
                this.createShareButton(this.shareButton);
            }
            if (!this.url || (changes['url'] && changes['url'].previousValue !== this.url)) {
                this.url = getValidUrl(this.autoSetMeta
                    ? this.url || this.getMetaTagContent('og:url')
                    : this.url, this.document.defaultView.location.href);
                if (this.getCount && this.prop.count) {
                    this.shareCount(this.url).subscribe((count) => this.count.emit(count));
                }
            }
        }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this._shareWindowClosed.unsubscribe();
    }
    /**
     * Open sharing dialog
     * @param {?} url - Share URL
     * @return {?}
     */
    share(url) {
        if (url) {
            // GA Tracking
            if (this.shareService.gaTracking && ((/** @type {?} */ (this.document.defaultView))).ga) {
                ((/** @type {?} */ (this.document.defaultView))).ga('send', 'social', this.prop.type, 'click', this.url);
            }
            // Open share pop up and activate its opened and closed events
            this._shareWindowClosed = of(this.document.defaultView.open(url, 'newwindow', this.shareService.windowSize)).pipe(tap(() => this.opened.emit(this.prop.type)), switchMap((popUp) => interval(200).pipe(takeWhile(() => !popUp.closed))), finalize(() => this.closed.emit(this.prop.type))).subscribe();
        }
    }
    /**
     * @param {?} shareUrl
     * @return {?}
     */
    shareCount(shareUrl) {
        /** @type {?} */
        const options = this.prop.count;
        return options.request === 'jsonp'
            ?
                // @ts-ignore
                this.http.jsonp(options.url + shareUrl, 'callback').pipe(...options.operators, catchError(() => EMPTY))
            :
                // @ts-ignore
                this.http.get(options.url + shareUrl, options.args).pipe(...options.operators, catchError(() => EMPTY));
    }
    /**
     * @param {?} buttonsName
     * @return {?}
     */
    createShareButton(buttonsName) {
        /** @type {?} */
        const button = Object.assign({}, this.shareService.prop[buttonsName]);
        if (button) {
            // Set share button properties
            this.prop = button;
            // Remove previous button class
            this.renderer.removeClass(this.el.nativeElement, `sb-${this._buttonClass}`);
            // Add new button class
            this.renderer.addClass(this.el.nativeElement, `sb-${button.type}`);
            // Set button css color variable
            this.el.nativeElement.style.setProperty('--button-color', this.prop.color);
            // Keep a copy of the class for future replacement
            this._buttonClass = button.type;
            // Set aria-label attribute
            this.renderer.setAttribute(this.el.nativeElement, 'aria-label', button.ariaLabel || button.text);
        }
        else {
            throw new Error(`[ShareButtons]: The share button '${buttonsName}' does not exist!`);
        }
    }
    /**
     * Get meta tag content
     * @param {?} key
     * @return {?}
     */
    getMetaTagContent(key) {
        /** @type {?} */
        const metaUsingProperty = this.meta.getTag(`property="${key}"`);
        if (metaUsingProperty)
            return metaUsingProperty.getAttribute('content');
        /** @type {?} */
        const metaUsingName = this.meta.getTag(`name="${key}"`);
        if (metaUsingName)
            return metaUsingName.getAttribute('content');
    }
    /**
     * @return {?}
     */
    getPlatform() {
        if (this.platform.IOS)
            return 'ois';
        if (this.platform.ANDROID)
            return 'android';
        return 'desktop';
    }
}
ShareDirective.decorators = [
    { type: Directive, args: [{
                selector: '[shareButton], [share-button]'
            },] }
];
/** @nocollapse */
ShareDirective.ctorParameters = () => [
    { type: Meta },
    { type: ElementRef },
    { type: HttpClient },
    { type: Platform },
    { type: Renderer2 },
    { type: ChangeDetectorRef },
    { type: ShareService },
    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }
];
ShareDirective.propDecorators = {
    shareButton: [{ type: Input }],
    getCount: [{ type: Input }],
    autoSetMeta: [{ type: Input }],
    url: [{ type: Input }],
    title: [{ type: Input }],
    description: [{ type: Input }],
    image: [{ type: Input }],
    tags: [{ type: Input }],
    count: [{ type: Output }],
    opened: [{ type: Output }],
    closed: [{ type: Output }],
    onClick: [{ type: HostListener, args: ['click',] }]
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */
class ShareCountPipe {
    /**
     * @param {?} num
     * @param {?=} digits
     * @return {?}
     */
    transform(num, digits) {
        return shareCountFormatter(num, digits);
    }
}
ShareCountPipe.decorators = [
    { type: Pipe, args: [{
                name: 'shareCount'
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */
class ShareModule {
    /**
     * @param {?=} config
     * @return {?}
     */
    static forRoot(config) {
        return {
            ngModule: ShareModule,
            providers: [
                { provide: CONFIG, useValue: config }
            ]
        };
    }
}
ShareModule.decorators = [
    { type: NgModule, args: [{
                imports: [
                    PlatformModule
                ],
                declarations: [
                    ShareDirective,
                    ShareCountPipe
                ],
                exports: [
                    ShareDirective,
                    ShareCountPipe
                ]
            },] }
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */

export { ShareModule, ShareService, ShareDirective, metaTagsOperators, printOperators, copyOperators, urlInMessageOperators, FacebookCountOperators, PinterestCountOperators, TumblrCountOperators, shareButtonsProp, CONFIG, ShareCountPipe };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXNoYXJlLWNvcmUuanMubWFwIiwic291cmNlcyI6WyJuZzovL0BuZ3gtc2hhcmUvY29yZS9saWIvc2hhcmUubW9kZWxzLnRzIiwibmc6Ly9Abmd4LXNoYXJlL2NvcmUvbGliL3V0aWxzLnRzIiwibmc6Ly9Abmd4LXNoYXJlL2NvcmUvbGliL3NoYXJlLm9wZXJhdG9ycy50cyIsIm5nOi8vQG5neC1zaGFyZS9jb3JlL2xpYi9zaGFyZS5wcm9wLnRzIiwibmc6Ly9Abmd4LXNoYXJlL2NvcmUvbGliL3NoYXJlLnNlcnZpY2UudHMiLCJuZzovL0BuZ3gtc2hhcmUvY29yZS9saWIvc2hhcmUtYnV0dG9uLmRpcmVjdGl2ZS50cyIsIm5nOi8vQG5neC1zaGFyZS9jb3JlL2xpYi9zaGFyZS1jb3VudC5waXBlLnRzIiwibmc6Ly9Abmd4LXNoYXJlL2NvcmUvbGliL3NoYXJlLm1vZHVsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3Rpb25Ub2tlbiwgQ2hhbmdlRGV0ZWN0b3JSZWYsIFJlbmRlcmVyMiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBPcGVyYXRvckZ1bmN0aW9uIH0gZnJvbSAncnhqcyc7XHJcblxyXG5leHBvcnQgY29uc3QgQ09ORklHID0gbmV3IEluamVjdGlvblRva2VuPFNoYXJlQnV0dG9uc0NvbmZpZz4oJ1NIQVJFX0JVVFRPTlNfQ09ORklHJyk7XHJcbi8qKlxyXG4gKiBTaGFyZSBidXR0b25zIGdsb2JhbCBjb25maWdcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2hhcmVCdXR0b25zQ29uZmlnIHtcclxuICBvcHRpb25zPzogU2hhcmVCdXR0b25zT3B0aW9ucztcclxuICBwcm9wPzogSVNoYXJlQnV0dG9ucyB8IGFueTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNoYXJlIGJ1dHRvbnMgZ2xvYmFsIG9wdGlvbnNcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2hhcmVCdXR0b25zT3B0aW9ucyB7XHJcbiAgdGhlbWU/OiBzdHJpbmc7XHJcbiAgaW5jbHVkZT86IHN0cmluZ1tdO1xyXG4gIGV4Y2x1ZGU/OiBzdHJpbmdbXTtcclxuICBzaXplPzogbnVtYmVyO1xyXG4gIHVybD86IHN0cmluZztcclxuICB0aXRsZT86IHN0cmluZztcclxuICBkZXNjcmlwdGlvbj86IHN0cmluZztcclxuICBpbWFnZT86IHN0cmluZztcclxuICB0YWdzPzogc3RyaW5nO1xyXG4gIHR3aXR0ZXJBY2NvdW50Pzogc3RyaW5nO1xyXG4gIGF1dG9TZXRNZXRhPzogYm9vbGVhbjtcclxuICBnYVRyYWNraW5nPzogYm9vbGVhbjtcclxuICB3aW5kb3dXaWR0aD86IG51bWJlcjtcclxuICB3aW5kb3dIZWlnaHQ/OiBudW1iZXI7XHJcbiAgbW9yZUJ1dHRvbkljb24/OiBhbnk7XHJcbiAgbGVzc0J1dHRvbkljb24/OiBhbnk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTaGFyZSBidXR0b25zIGNvbGxlY3Rpb25cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVNoYXJlQnV0dG9ucyB7XHJcbiAgZmFjZWJvb2s/OiBJU2hhcmVCdXR0b247XHJcbiAgdHdpdHRlcj86IElTaGFyZUJ1dHRvbjtcclxuICBsaW5rZWRpbj86IElTaGFyZUJ1dHRvbjtcclxuICBnb29nbGU/OiBJU2hhcmVCdXR0b247XHJcbiAgdHVtYmxyPzogSVNoYXJlQnV0dG9uO1xyXG4gIHN0dW1ibGU/OiBJU2hhcmVCdXR0b247XHJcbiAgcGludGVyZXN0PzogSVNoYXJlQnV0dG9uO1xyXG4gIHJlZGRpdD86IElTaGFyZUJ1dHRvbjtcclxuICB2az86IElTaGFyZUJ1dHRvbjtcclxuICB0ZWxlZ3JhbT86IElTaGFyZUJ1dHRvbjtcclxuICBtZXNzZW5nZXI/OiBJU2hhcmVCdXR0b247XHJcbiAgd2hhdHNhcHA/OiBJU2hhcmVCdXR0b247XHJcbiAgeGluZz86IElTaGFyZUJ1dHRvbjtcclxuICBzbXM/OiBJU2hhcmVCdXR0b247XHJcbiAgZW1haWw/OiBJU2hhcmVCdXR0b247XHJcbiAgcHJpbnQ/OiBJU2hhcmVCdXR0b247XHJcbiAgY29weT86IElTaGFyZUJ1dHRvbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNoYXJlIGJ1dHRvbiBwcm9wZXJ0aWVzXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIElTaGFyZUJ1dHRvbiB7XHJcbiAgdGV4dD86IHN0cmluZztcclxuICBpY29uPzogYW55O1xyXG4gIHR5cGU/OiBzdHJpbmc7XHJcbiAgY29sb3I/OiBzdHJpbmc7XHJcbiAgYXJpYUxhYmVsPzogc3RyaW5nO1xyXG4gIHN1Y2Nlc3NUZXh0Pzogc3RyaW5nO1xyXG4gIHN1Y2Nlc3NJY29uPzogYW55O1xyXG4gIGZhaWxUZXh0Pzogc3RyaW5nO1xyXG4gIGZhaWxJY29uPzogYW55O1xyXG4gIHNoYXJlPzoge1xyXG4gICAgZGVza3RvcD86IHN0cmluZztcclxuICAgIGFuZHJvaWQ/OiBzdHJpbmc7XHJcbiAgICBpb3M/OiBzdHJpbmc7XHJcbiAgICBvcGVyYXRvcnM/OiBPcGVyYXRvckZ1bmN0aW9uPGFueSwgYW55PltdO1xyXG4gICAgbWV0YVRhZ3M/OiBhbnk7XHJcbiAgfTtcclxuICBjb3VudD86IElTaGFyZUNvdW50O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElTaGFyZUNvdW50IHtcclxuICByZXF1ZXN0Pzogc3RyaW5nO1xyXG4gIHVybD86IHN0cmluZztcclxuICBhcmdzPzogYW55O1xyXG4gIG9wZXJhdG9ycz86IE9wZXJhdG9yRnVuY3Rpb248YW55LCBhbnk+W107XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTaGFyZSBidXR0b24gZGlyZWN0aXZlIHJlZiBpbnRlcmZhY2VcclxuICogVGhpcyByZWYgdG8gYmUgdXNlZCBpbiB0aGUgc2hhcmUgb3BlcmF0b3JzXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFNoYXJlQnV0dG9uUmVmIHtcclxuICBwcm9wPzogSVNoYXJlQnV0dG9uO1xyXG4gIHJlbmRlcmVyPzogUmVuZGVyZXIyO1xyXG4gIGNkPzogQ2hhbmdlRGV0ZWN0b3JSZWY7XHJcbiAgZWw/OiBIVE1MRWxlbWVudDtcclxuICBkb2N1bWVudD86IGFueTtcclxuICBwbGF0Zm9ybT86IHN0cmluZztcclxuICB0ZW1wPzogYW55O1xyXG4gIG1ldGFUYWdzOiB7XHJcbiAgICB1cmw/OiBzdHJpbmc7XHJcbiAgICB0aXRsZT86IHN0cmluZztcclxuICAgIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xyXG4gICAgaW1hZ2U/OiBzdHJpbmc7XHJcbiAgICB0YWdzPzogc3RyaW5nO1xyXG4gICAgdmlhPzogc3RyaW5nO1xyXG4gIH07XHJcbn1cclxuIiwiaW1wb3J0IHsgT2JzZXJ2YWJsZSwgb2YgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBTaGFyZUJ1dHRvblJlZiB9IGZyb20gJy4vc2hhcmUubW9kZWxzJztcclxuXHJcbi8qKiBTaW1wbGUgb2JqZWN0IGNoZWNrLiovXHJcbmZ1bmN0aW9uIGlzT2JqZWN0KGl0ZW0pOiBib29sZWFuIHtcclxuICByZXR1cm4gKGl0ZW0gJiYgdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KGl0ZW0pKTtcclxufVxyXG5cclxuLyoqIERlZXAgbWVyZ2UgdHdvIG9iamVjdHMuKi9cclxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlRGVlcCh0YXJnZXQsIC4uLnNvdXJjZXMpIHtcclxuICBpZiAoIXNvdXJjZXMubGVuZ3RoKSB7XHJcbiAgICByZXR1cm4gdGFyZ2V0O1xyXG4gIH1cclxuICBjb25zdCBzb3VyY2UgPSBzb3VyY2VzLnNoaWZ0KCk7XHJcblxyXG4gIGlmIChpc09iamVjdCh0YXJnZXQpICYmIGlzT2JqZWN0KHNvdXJjZSkpIHtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIHNvdXJjZSkge1xyXG4gICAgICBpZiAoaXNPYmplY3Qoc291cmNlW2tleV0pKSB7XHJcbiAgICAgICAgaWYgKCF0YXJnZXRba2V5XSkge1xyXG4gICAgICAgICAgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHtba2V5XToge319KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWVyZ2VEZWVwKHRhcmdldFtrZXldLCBzb3VyY2Vba2V5XSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHtba2V5XTogc291cmNlW2tleV19KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG1lcmdlRGVlcCh0YXJnZXQsIC4uLnNvdXJjZXMpO1xyXG59XHJcblxyXG4vKiogUmV0dXJucyBhIHJlYWRhYmxlIG51bWJlciBmcm9tIHNoYXJlIGNvdW50ICovXHJcbmV4cG9ydCBmdW5jdGlvbiBzaGFyZUNvdW50Rm9ybWF0dGVyKG51bTogbnVtYmVyLCBkaWdpdHM6IG51bWJlcik6IHN0cmluZyB7XHJcblxyXG4gIGNvbnN0IHNpID0gW1xyXG4gICAge3ZhbHVlOiAxRTksIHN5bWJvbDogJ0InfSxcclxuICAgIHt2YWx1ZTogMUU2LCBzeW1ib2w6ICdNJ30sXHJcbiAgICB7dmFsdWU6IDFFMywgc3ltYm9sOiAnSyd9XHJcbiAgXSwgcnggPSAvXFwuMCskfChcXC5bMC05XSpbMS05XSkwKyQvO1xyXG5cclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHNpLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBpZiAobnVtID49IHNpW2ldLnZhbHVlKSB7XHJcbiAgICAgIHJldHVybiAobnVtIC8gc2lbaV0udmFsdWUpLnRvRml4ZWQoZGlnaXRzKS5yZXBsYWNlKHJ4LCAnJDEnKSArIHNpW2ldLnN5bWJvbDtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG51bS50b0ZpeGVkKGRpZ2l0cykucmVwbGFjZShyeCwgJyQxJyk7XHJcbn1cclxuXHJcbi8qKiBDb3B5IHRleHQgdG8gY2xpcGJvYXJkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjb3B5VG9DbGlwYm9hcmQocmVmOiBTaGFyZUJ1dHRvblJlZik6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgcmV0dXJuIG9mKHJlZi5tZXRhVGFncy51cmwpLnBpcGUoXHJcbiAgICB0YXAoKHVybDogc3RyaW5nKSA9PiB7XHJcblxyXG4gICAgICAvLyBDcmVhdGUgYSBoaWRkZW4gVGV4dEFyZWEgZWxlbWVudFxyXG4gICAgICBjb25zdCB0ZXh0QXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCA9IDxIVE1MVGV4dEFyZWFFbGVtZW50PnJlZi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xyXG4gICAgICB0ZXh0QXJlYS52YWx1ZSA9IHVybDtcclxuICAgICAgcmVmLmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGV4dEFyZWEpO1xyXG5cclxuICAgICAgLy8gaGlnaGxpZ2h0IFRleHRBcmVhIHRvIGNvcHkgdGhlIHRleHRcclxuICAgICAgaWYgKHJlZi5wbGF0Zm9ybSA9PT0gJ2lvcycpIHtcclxuICAgICAgICBjb25zdCByYW5nZSA9IHJlZi5kb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xyXG4gICAgICAgIHJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyh0ZXh0QXJlYSk7XHJcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gcmVmLmRvY3VtZW50LmRlZmF1bHRWaWV3LmdldFNlbGVjdGlvbigpO1xyXG4gICAgICAgIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtcclxuICAgICAgICBzZWxlY3Rpb24uYWRkUmFuZ2UocmFuZ2UpO1xyXG4gICAgICAgIHRleHRBcmVhLnJlYWRPbmx5ID0gdHJ1ZTtcclxuICAgICAgICB0ZXh0QXJlYS5zZXRTZWxlY3Rpb25SYW5nZSgwLCA5OTk5OTkpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRleHRBcmVhLnNlbGVjdCgpO1xyXG4gICAgICB9XHJcbiAgICAgIHJlZi5kb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpO1xyXG4gICAgICByZWYuZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0ZXh0QXJlYSk7XHJcbiAgICB9KVxyXG4gICk7XHJcbn1cclxuXHJcbi8qKiBSZXR1cm5zIGEgdmFsaWQgVVJMIG9yIGZhbGxzIGJhY2sgdG8gY3VycmVudCBVUkwgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFZhbGlkVXJsKHVybDogc3RyaW5nLCBmYWxsYmFja1VybDogc3RyaW5nKTogc3RyaW5nIHtcclxuICBpZiAodXJsKSB7XHJcbiAgICBjb25zdCByID0gLyhodHRwfGh0dHBzKTpcXC9cXC8oXFx3Kzp7MCwxfVxcdypAKT8oXFxTKykoOlswLTldKyk/KFxcL3xcXC8oW1xcdyMhOi4/Kz0mJUAhXFwtXFwvXSkpPy87XHJcbiAgICBpZiAoci50ZXN0KHVybCkpIHJldHVybiB1cmw7XHJcbiAgICBjb25zb2xlLndhcm4oYFtTaGFyZUJ1dHRvbnNdOiBTaGFyaW5nIGxpbmsgJyR7dXJsfScgaXMgaW52YWxpZCFgKTtcclxuICB9XHJcbiAgcmV0dXJuIGZhbGxiYWNrVXJsO1xyXG59XHJcbiIsImltcG9ydCB7IG9mLCBPcGVyYXRvckZ1bmN0aW9uIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IG1hcCwgZGVsYXksIHN3aXRjaE1hcCwgY2F0Y2hFcnJvciwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBTaGFyZUJ1dHRvblJlZiB9IGZyb20gJy4vc2hhcmUubW9kZWxzJztcclxuaW1wb3J0IHsgY29weVRvQ2xpcGJvYXJkLCBtZXJnZURlZXAgfSBmcm9tICcuL3V0aWxzJztcclxuXHJcbi8qKlxyXG4gKiBNZXRhIHRhZ3Mgb3BlcmF0b3IgLSBTZXJpYWxpemUgbWV0YSB0YWdzIGludG8gdGhlIHNoYXJlciBVUkxcclxuICovXHJcbmV4cG9ydCBjb25zdCBtZXRhVGFnc09wZXJhdG9yczogT3BlcmF0b3JGdW5jdGlvbjxhbnksIGFueT5bXSA9IFtcclxuICBtYXAoKHJlZjogU2hhcmVCdXR0b25SZWYpID0+IHtcclxuXHJcbiAgICAvLyBTb2NpYWwgbmV0d29yayBzaGFyZXIgVVJMICovXHJcbiAgICBjb25zdCBTaGFyZXJVUkwgPSByZWYucHJvcC5zaGFyZVtyZWYucGxhdGZvcm1dO1xyXG4gICAgaWYgKFNoYXJlclVSTCkge1xyXG5cclxuICAgICAgLy8gb2JqZWN0IGNvbnRhaW5zIHN1cHBvcnRlZCBtZXRhIHRhZ3NcclxuICAgICAgY29uc3QgbWV0YVRhZ3MgPSByZWYucHJvcC5zaGFyZS5tZXRhVGFncztcclxuXHJcbiAgICAgIC8vIG9iamVjdCBjb250YWlucyBtZXRhIHRhZ3MgdmFsdWVzICovXHJcbiAgICAgIGNvbnN0IG1ldGFUYWdzVmFsdWVzID0gcmVmLm1ldGFUYWdzO1xyXG5cclxuICAgICAgbGV0IGxpbmsgPSAnJztcclxuICAgICAgLy8gU2V0IGVhY2ggbWV0YSB0YWcgd2l0aCB1c2VyIHZhbHVlXHJcbiAgICAgIGlmIChtZXRhVGFncykge1xyXG4gICAgICAgIGxpbmsgPSBPYmplY3QuZW50cmllcyhtZXRhVGFncykubWFwKChba2V5LCBtZXRhVGFnXSkgPT5cclxuICAgICAgICAgIG1ldGFUYWdzVmFsdWVzW2tleV0gPyBgJHttZXRhVGFnfT0ke2VuY29kZVVSSUNvbXBvbmVudChtZXRhVGFnc1ZhbHVlc1trZXldKX1gIDogJydcclxuICAgICAgICApLmpvaW4oJyYnKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gU2hhcmVyVVJMICsgbGluaztcclxuICAgIH1cclxuICAgIHJldHVybjtcclxuICB9KVxyXG5dO1xyXG5cclxuLyoqXHJcbiAqIFByaW50IGJ1dHRvbiBvcGVyYXRvclxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHByaW50T3BlcmF0b3JzOiBPcGVyYXRvckZ1bmN0aW9uPGFueSwgYW55PltdID0gW1xyXG4gIG1hcCgocmVmOiBTaGFyZUJ1dHRvblJlZikgPT4gcmVmLmRvY3VtZW50LmRlZmF1bHRWaWV3LnByaW50KCkpXHJcbl07XHJcblxyXG4vKipcclxuICogQ29weSBsaW5rIHRvIGNsaXBib2FyZCwgdXNlZCBmb3IgY29weSBidXR0b25cclxuICovXHJcbmV4cG9ydCBjb25zdCBjb3B5T3BlcmF0b3JzOiBPcGVyYXRvckZ1bmN0aW9uPGFueSwgYW55PltdID0gW1xyXG4gIG1hcCgocmVmOiBTaGFyZUJ1dHRvblJlZikgPT4ge1xyXG5cclxuICAgIC8vIERpc2FibGUgdGhlIGJ1dHRvblxyXG4gICAgcmVmLnJlbmRlcmVyLnNldFN0eWxlKHJlZi5lbCwgJ3BvaW50ZXItZXZlbnRzJywgJ25vbmUnKTtcclxuXHJcbiAgICByZWYudGVtcCA9IHt0ZXh0OiByZWYucHJvcC50ZXh0LCBpY29uOiByZWYucHJvcC5pY29ufTtcclxuICAgIHJlZi5tZXRhVGFncy51cmwgPSBkZWNvZGVVUklDb21wb25lbnQocmVmLm1ldGFUYWdzLnVybCk7XHJcbiAgICByZXR1cm4gcmVmO1xyXG4gIH0pLFxyXG4gIHN3aXRjaE1hcCgocmVmOiBTaGFyZUJ1dHRvblJlZikgPT4gY29weVRvQ2xpcGJvYXJkKHJlZikucGlwZShcclxuICAgIG1hcCgoKSA9PiB7XHJcbiAgICAgIHJlZi5wcm9wLnRleHQgPSByZWYucHJvcC5zdWNjZXNzVGV4dDtcclxuICAgICAgcmVmLnByb3AuaWNvbiA9IHJlZi5wcm9wLnN1Y2Nlc3NJY29uO1xyXG4gICAgICByZXR1cm4gcmVmO1xyXG4gICAgfSksXHJcbiAgICBjYXRjaEVycm9yKCgpID0+IHtcclxuICAgICAgcmVmLnByb3AudGV4dCA9IHJlZi5wcm9wLmZhaWxUZXh0O1xyXG4gICAgICByZWYucHJvcC5pY29uID0gcmVmLnByb3AuZmFpbEljb247XHJcbiAgICAgIHJldHVybiBvZihyZWYpO1xyXG4gICAgfSlcclxuICApKSxcclxuICBtYXAoKHJlZjogU2hhcmVCdXR0b25SZWYpID0+IHtcclxuICAgIHJlZi5jZC5tYXJrRm9yQ2hlY2soKTtcclxuICAgIHJldHVybiByZWY7XHJcbiAgfSksXHJcbiAgZGVsYXkoMjAwMCksXHJcbiAgbWFwKChyZWY6IFNoYXJlQnV0dG9uUmVmKSA9PiB7XHJcblxyXG4gICAgLy8gRW5hYmxlIHRoZSBidXR0b25cclxuICAgIHJlZi5yZW5kZXJlci5zZXRTdHlsZShyZWYuZWwsICdwb2ludGVyLWV2ZW50cycsICdhdXRvJyk7XHJcblxyXG4gICAgLy8gUmVzZXQgY29weSBidXR0b24gdGV4dCBhbmQgaWNvbiAqL1xyXG4gICAgcmVmLnByb3AudGV4dCA9IHJlZi50ZW1wLnRleHQ7XHJcbiAgICByZWYucHJvcC5pY29uID0gcmVmLnRlbXAuaWNvbjtcclxuICAgIHJlZi5jZC5tYXJrRm9yQ2hlY2soKTtcclxuICB9KVxyXG5dO1xyXG5cclxuLyoqXHJcbiAqIEFkZCB0aGUgc2hhcmUgVVJMIHRvIG1lc3NhZ2UgYm9keSwgdXNlZCBmb3IgV2hhdHNBcHAgYW5kIEVtYWlsIGJ1dHRvbnNcclxuICovXHJcbmV4cG9ydCBjb25zdCB1cmxJbk1lc3NhZ2VPcGVyYXRvcnM6IE9wZXJhdG9yRnVuY3Rpb248YW55LCBhbnk+W10gPSBbXHJcbiAgbWFwKChyZWY6IFNoYXJlQnV0dG9uUmVmKSA9PiB7XHJcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHJlZi5tZXRhVGFncy5kZXNjcmlwdGlvbjtcclxuICAgIGNvbnN0IHVybCA9IHJlZi5tZXRhVGFncy51cmw7XHJcbiAgICBjb25zdCBuZXdSZWY6IFNoYXJlQnV0dG9uUmVmID0ge1xyXG4gICAgICBtZXRhVGFnczoge1xyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiA/IGAke2Rlc2NyaXB0aW9ufVxcclxcbiR7dXJsfWAgOiB1cmxcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBtZXJnZURlZXAocmVmLCBuZXdSZWYpO1xyXG4gIH0pXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgRmFjZWJvb2tDb3VudE9wZXJhdG9yczogT3BlcmF0b3JGdW5jdGlvbjxhbnksIGFueT5bXSA9IFtcclxuICBtYXAoKHJlczogYW55KSA9PiArcmVzLnNoYXJlLnNoYXJlX2NvdW50KVxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IFBpbnRlcmVzdENvdW50T3BlcmF0b3JzOiBPcGVyYXRvckZ1bmN0aW9uPGFueSwgYW55PltdID0gW1xyXG4gIG1hcCgodGV4dDogc3RyaW5nKSA9PiBKU09OLnBhcnNlKHRleHQucmVwbGFjZSgvXnJlY2VpdmVDb3VudFxcKCguKilcXCkvLCAnJDEnKSkpLFxyXG4gIG1hcCgocmVzOiBhbnkpID0+ICtyZXMuY291bnQpXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgVHVtYmxyQ291bnRPcGVyYXRvcnM6IE9wZXJhdG9yRnVuY3Rpb248YW55LCBhbnk+W10gPSBbXHJcbiAgbWFwKChyZXM6IGFueSkgPT4gK3Jlcy5yZXNwb25zZS5ub3RlX2NvdW50KVxyXG5dO1xyXG4iLCJpbXBvcnQge1xyXG4gIG1ldGFUYWdzT3BlcmF0b3JzLFxyXG4gIHByaW50T3BlcmF0b3JzLFxyXG4gIGNvcHlPcGVyYXRvcnMsXHJcbiAgdXJsSW5NZXNzYWdlT3BlcmF0b3JzLFxyXG4gIEZhY2Vib29rQ291bnRPcGVyYXRvcnMsXHJcbiAgUGludGVyZXN0Q291bnRPcGVyYXRvcnMsXHJcbiAgVHVtYmxyQ291bnRPcGVyYXRvcnNcclxufSBmcm9tICcuL3NoYXJlLm9wZXJhdG9ycyc7XHJcbmltcG9ydCB7IElTaGFyZUJ1dHRvbnMgfSBmcm9tICcuL3NoYXJlLm1vZGVscyc7XHJcblxyXG5leHBvcnQgY29uc3Qgc2hhcmVCdXR0b25zUHJvcDogSVNoYXJlQnV0dG9ucyA9IHtcclxuICBmYWNlYm9vazoge1xyXG4gICAgdHlwZTogJ2ZhY2Vib29rJyxcclxuICAgIHRleHQ6ICdGYWNlYm9vaycsXHJcbiAgICBpY29uOiBbJ2ZhYicsICdmYWNlYm9vay1mJ10sXHJcbiAgICBjb2xvcjogJyM0MjY3QjInLFxyXG4gICAgc2hhcmU6IHtcclxuICAgICAgZGVza3RvcDogJ2h0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9zaGFyZXIvc2hhcmVyLnBocD8nLFxyXG4gICAgICBhbmRyb2lkOiAnaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3NoYXJlci9zaGFyZXIucGhwPycsXHJcbiAgICAgIGlvczogJ2h0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9zaGFyZXIvc2hhcmVyLnBocD8nLFxyXG4gICAgICBvcGVyYXRvcnM6IG1ldGFUYWdzT3BlcmF0b3JzLFxyXG4gICAgICBtZXRhVGFnczoge1xyXG4gICAgICAgIHVybDogJ3UnXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjb3VudDoge1xyXG4gICAgICByZXF1ZXN0OiAnaHR0cCcsXHJcbiAgICAgIHVybDogJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tP2lkPScsXHJcbiAgICAgIG9wZXJhdG9yczogRmFjZWJvb2tDb3VudE9wZXJhdG9yc1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgdHdpdHRlcjoge1xyXG4gICAgdHlwZTogJ3R3aXR0ZXInLFxyXG4gICAgdGV4dDogJ1R3aXR0ZXInLFxyXG4gICAgaWNvbjogWydmYWInLCAndHdpdHRlciddLFxyXG4gICAgY29sb3I6ICcjMDBhY2VlJyxcclxuICAgIHNoYXJlOiB7XHJcbiAgICAgIGRlc2t0b3A6ICdodHRwczovL3R3aXR0ZXIuY29tL2ludGVudC90d2VldD8nLFxyXG4gICAgICBhbmRyb2lkOiAnaHR0cHM6Ly90d2l0dGVyLmNvbS9pbnRlbnQvdHdlZXQ/JyxcclxuICAgICAgaW9zOiAnaHR0cHM6Ly90d2l0dGVyLmNvbS9pbnRlbnQvdHdlZXQ/JyxcclxuICAgICAgb3BlcmF0b3JzOiBtZXRhVGFnc09wZXJhdG9ycyxcclxuICAgICAgbWV0YVRhZ3M6IHtcclxuICAgICAgICB1cmw6ICd1cmwnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAndGV4dCcsXHJcbiAgICAgICAgdGFnczogJ2hhc2h0YWdzJyxcclxuICAgICAgICB2aWE6ICd2aWEnXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIGdvb2dsZToge1xyXG4gICAgdHlwZTogJ2dvb2dsZScsXHJcbiAgICB0ZXh0OiAnR29vZ2xlKycsXHJcbiAgICBpY29uOiBbJ2ZhYicsICdnb29nbGUtcGx1cy1nJ10sXHJcbiAgICBjb2xvcjogJyNEQjQ0MzcnLFxyXG4gICAgc2hhcmU6IHtcclxuICAgICAgZGVza3RvcDogJ2h0dHBzOi8vcGx1cy5nb29nbGUuY29tL3NoYXJlPycsXHJcbiAgICAgIGFuZHJvaWQ6ICdodHRwczovL3BsdXMuZ29vZ2xlLmNvbS9zaGFyZT8nLFxyXG4gICAgICBpb3M6ICdodHRwczovL3BsdXMuZ29vZ2xlLmNvbS9zaGFyZT8nLFxyXG4gICAgICBtZXRhVGFnczoge1xyXG4gICAgICAgIHVybDogJ3VybCcsXHJcbiAgICAgIH0sXHJcbiAgICAgIG9wZXJhdG9yczogbWV0YVRhZ3NPcGVyYXRvcnNcclxuICAgIH1cclxuICB9LFxyXG4gIGxpbmtlZGluOiB7XHJcbiAgICB0eXBlOiAnbGlua2VkaW4nLFxyXG4gICAgdGV4dDogJ0xpbmtlZEluJyxcclxuICAgIGljb246IFsnZmFiJywgJ2xpbmtlZGluLWluJ10sXHJcbiAgICBjb2xvcjogJyMwMDZmYTYnLFxyXG4gICAgc2hhcmU6IHtcclxuICAgICAgZGVza3RvcDogJ2h0dHA6Ly93d3cubGlua2VkaW4uY29tL3NoYXJlQXJ0aWNsZT8nLFxyXG4gICAgICBhbmRyb2lkOiAnaHR0cDovL3d3dy5saW5rZWRpbi5jb20vc2hhcmVBcnRpY2xlPycsXHJcbiAgICAgIGlvczogJ2h0dHA6Ly93d3cubGlua2VkaW4uY29tL3NoYXJlQXJ0aWNsZT8nLFxyXG4gICAgICBvcGVyYXRvcnM6IG1ldGFUYWdzT3BlcmF0b3JzLFxyXG4gICAgICBtZXRhVGFnczoge1xyXG4gICAgICAgIHVybDogJ3VybCcsXHJcbiAgICAgICAgdGl0bGU6ICd0aXRsZScsXHJcbiAgICAgICAgZGVzY3JpcHRpb246ICdzdW1tYXJ5J1xyXG4gICAgICB9LFxyXG4gICAgfVxyXG4gIH0sXHJcbiAgcGludGVyZXN0OiB7XHJcbiAgICB0eXBlOiAncGludGVyZXN0JyxcclxuICAgIHRleHQ6ICdQaW50ZXJlc3QnLFxyXG4gICAgaWNvbjogWydmYWInLCAncGludGVyZXN0LXAnXSxcclxuICAgIGNvbG9yOiAnI0JEMDkxRCcsXHJcbiAgICBzaGFyZToge1xyXG4gICAgICBkZXNrdG9wOiAnaHR0cHM6Ly9pbi5waW50ZXJlc3QuY29tL3Bpbi9jcmVhdGUvYnV0dG9uLz8nLFxyXG4gICAgICBhbmRyb2lkOiAnaHR0cHM6Ly9pbi5waW50ZXJlc3QuY29tL3Bpbi9jcmVhdGUvYnV0dG9uLz8nLFxyXG4gICAgICBpb3M6ICdodHRwczovL2luLnBpbnRlcmVzdC5jb20vcGluL2NyZWF0ZS9idXR0b24vPycsXHJcbiAgICAgIG9wZXJhdG9yczogbWV0YVRhZ3NPcGVyYXRvcnMsXHJcbiAgICAgIG1ldGFUYWdzOiB7XHJcbiAgICAgICAgdXJsOiAndXJsJyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJ2Rlc2NyaXB0aW9uJyxcclxuICAgICAgICBpbWFnZTogJ21lZGlhJ1xyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAgY291bnQ6IHtcclxuICAgICAgcmVxdWVzdDogJ2h0dHAnLFxyXG4gICAgICB1cmw6ICdodHRwczovL2FwaS5waW50ZXJlc3QuY29tL3YxL3VybHMvY291bnQuanNvbj91cmw9JyxcclxuICAgICAgYXJnczoge3Jlc3BvbnNlVHlwZTogJ3RleHQnfSxcclxuICAgICAgb3BlcmF0b3JzOiBQaW50ZXJlc3RDb3VudE9wZXJhdG9yc1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgcmVkZGl0OiB7XHJcbiAgICB0eXBlOiAncmVkZGl0JyxcclxuICAgIHRleHQ6ICdSZWRkaXQnLFxyXG4gICAgaWNvbjogWydmYWInLCAncmVkZGl0LWFsaWVuJ10sXHJcbiAgICBjb2xvcjogJyNGRjQwMDYnLFxyXG4gICAgc2hhcmU6IHtcclxuICAgICAgZGVza3RvcDogJ2h0dHA6Ly93d3cucmVkZGl0LmNvbS9zdWJtaXQ/JyxcclxuICAgICAgYW5kcm9pZDogJ2h0dHA6Ly93d3cucmVkZGl0LmNvbS9zdWJtaXQ/JyxcclxuICAgICAgaW9zOiAnaHR0cDovL3d3dy5yZWRkaXQuY29tL3N1Ym1pdD8nLFxyXG4gICAgICBvcGVyYXRvcnM6IG1ldGFUYWdzT3BlcmF0b3JzLFxyXG4gICAgICBtZXRhVGFnczoge1xyXG4gICAgICAgIHVybDogJ3VybCcsXHJcbiAgICAgICAgdGl0bGU6ICd0aXRsZSdcclxuICAgICAgfSxcclxuICAgIH1cclxuICB9LFxyXG4gIHR1bWJscjoge1xyXG4gICAgdHlwZTogJ3R1bWJscicsXHJcbiAgICB0ZXh0OiAnVHVtYmxyJyxcclxuICAgIGljb246IFsnZmFiJywgJ3R1bWJsciddLFxyXG4gICAgY29sb3I6ICcjMzY0NjVEJyxcclxuICAgIHNoYXJlOiB7XHJcbiAgICAgIGRlc2t0b3A6ICdodHRwOi8vdHVtYmxyLmNvbS93aWRnZXRzL3NoYXJlL3Rvb2w/JyxcclxuICAgICAgYW5kcm9pZDogJ2h0dHA6Ly90dW1ibHIuY29tL3dpZGdldHMvc2hhcmUvdG9vbD8nLFxyXG4gICAgICBpb3M6ICdodHRwOi8vdHVtYmxyLmNvbS93aWRnZXRzL3NoYXJlL3Rvb2w/JyxcclxuICAgICAgb3BlcmF0b3JzOiBtZXRhVGFnc09wZXJhdG9ycyxcclxuICAgICAgbWV0YVRhZ3M6IHtcclxuICAgICAgICB1cmw6ICdjYW5vbmljYWxVcmwnLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnY2FwdGlvbicsXHJcbiAgICAgICAgdGFnczogJ3RhZ3MnXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjb3VudDoge1xyXG4gICAgICByZXF1ZXN0OiAnanNvbnAnLFxyXG4gICAgICB1cmw6ICdodHRwczovL2FwaS50dW1ibHIuY29tL3YyL3NoYXJlL3N0YXRzP3VybD0nLFxyXG4gICAgICBvcGVyYXRvcnM6IFR1bWJsckNvdW50T3BlcmF0b3JzXHJcbiAgICB9XHJcbiAgfSxcclxuICB3aGF0c2FwcDoge1xyXG4gICAgdHlwZTogJ3doYXRzYXBwJyxcclxuICAgIHRleHQ6ICdXaGF0c0FwcCcsXHJcbiAgICBpY29uOiBbJ2ZhYicsICd3aGF0c2FwcCddLFxyXG4gICAgY29sb3I6ICcjMjVEMzY2JyxcclxuICAgIHNoYXJlOiB7XHJcbiAgICAgIGRlc2t0b3A6ICdodHRwczovL3dlYi53aGF0c2FwcC5jb20vc2VuZD8nLFxyXG4gICAgICBhbmRyb2lkOiAnd2hhdHNhcHA6Ly9zZW5kPycsXHJcbiAgICAgIGlvczogJ3doYXRzYXBwOi8vc2VuZD8nLFxyXG4gICAgICBvcGVyYXRvcnM6IFtcclxuICAgICAgICAuLi51cmxJbk1lc3NhZ2VPcGVyYXRvcnMsXHJcbiAgICAgICAgLi4ubWV0YVRhZ3NPcGVyYXRvcnNcclxuICAgICAgXSxcclxuICAgICAgbWV0YVRhZ3M6IHtcclxuICAgICAgICBkZXNjcmlwdGlvbjogJ3RleHQnXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIG1lc3Nlbmdlcjoge1xyXG4gICAgdHlwZTogJ21lc3NlbmdlcicsXHJcbiAgICB0ZXh0OiAnTWVzc2VuZ2VyJyxcclxuICAgIGljb246IFsnZmFiJywgJ2ZhY2Vib29rLW1lc3NlbmdlciddLFxyXG4gICAgY29sb3I6ICcjMDA4MEZGJyxcclxuICAgIHNoYXJlOiB7XHJcbiAgICAgIGFuZHJvaWQ6ICdmYi1tZXNzZW5nZXI6Ly9zaGFyZS8/JyxcclxuICAgICAgaW9zOiAnZmItbWVzc2VuZ2VyOi8vc2hhcmUvPycsXHJcbiAgICAgIG9wZXJhdG9yczogbWV0YVRhZ3NPcGVyYXRvcnMsXHJcbiAgICAgIG1ldGFUYWdzOiB7XHJcbiAgICAgICAgdXJsOiAnbGluaydcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgdGVsZWdyYW06IHtcclxuICAgIHR5cGU6ICd0ZWxlZ3JhbScsXHJcbiAgICB0ZXh0OiAnVGVsZWdyYW0nLFxyXG4gICAgaWNvbjogWydmYWInLCAndGVsZWdyYW0tcGxhbmUnXSxcclxuICAgIGNvbG9yOiAnIzAwODhjYycsXHJcbiAgICBzaGFyZToge1xyXG4gICAgICBkZXNrdG9wOiAnaHR0cHM6Ly90Lm1lL3NoYXJlL3VybD8nLFxyXG4gICAgICBhbmRyb2lkOiAnaHR0cHM6Ly90Lm1lL3NoYXJlL3VybD8nLFxyXG4gICAgICBpb3M6ICdodHRwczovL3QubWUvc2hhcmUvdXJsPycsXHJcbiAgICAgIG9wZXJhdG9yczogbWV0YVRhZ3NPcGVyYXRvcnMsXHJcbiAgICAgIG1ldGFUYWdzOiB7XHJcbiAgICAgICAgdXJsOiAndXJsJyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJ3RleHQnXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIHZrOiB7XHJcbiAgICB0eXBlOiAndmsnLFxyXG4gICAgdGV4dDogJ1ZLb250YWt0ZScsXHJcbiAgICBpY29uOiBbJ2ZhYicsICd2ayddLFxyXG4gICAgY29sb3I6ICcjNEM3NUEzJyxcclxuICAgIHNoYXJlOiB7XHJcbiAgICAgIGRlc2t0b3A6ICdodHRwOi8vdmsuY29tL3NoYXJlLnBocD8nLFxyXG4gICAgICBhbmRyb2lkOiAnaHR0cDovL3ZrLmNvbS9zaGFyZS5waHA/JyxcclxuICAgICAgaW9zOiAnaHR0cDovL3ZrLmNvbS9zaGFyZS5waHA/JyxcclxuICAgICAgb3BlcmF0b3JzOiBtZXRhVGFnc09wZXJhdG9ycyxcclxuICAgICAgbWV0YVRhZ3M6IHtcclxuICAgICAgICB1cmw6ICd1cmwnXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIHN0dW1ibGU6IHtcclxuICAgIHR5cGU6ICdzdHVtYmxlJyxcclxuICAgIHRleHQ6ICdTdHVtYmxlJyxcclxuICAgIGljb246IFsnZmFiJywgJ3N0dW1ibGV1cG9uJ10sXHJcbiAgICBjb2xvcjogJyNlYjQ5MjQnLFxyXG4gICAgc2hhcmU6IHtcclxuICAgICAgZGVza3RvcDogJ2h0dHA6Ly93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD8nLFxyXG4gICAgICBhbmRyb2lkOiAnaHR0cDovL3d3dy5zdHVtYmxldXBvbi5jb20vc3VibWl0PycsXHJcbiAgICAgIGlvczogJ2h0dHA6Ly93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD8nLFxyXG4gICAgICBvcGVyYXRvcnM6IG1ldGFUYWdzT3BlcmF0b3JzLFxyXG4gICAgICBtZXRhVGFnczoge1xyXG4gICAgICAgIHVybDogJ3VybCdcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgeGluZzoge1xyXG4gICAgdHlwZTogJ3hpbmcnLFxyXG4gICAgdGV4dDogJ1hpbmcnLFxyXG4gICAgaWNvbjogWydmYWInLCAneGluZyddLFxyXG4gICAgY29sb3I6ICcjMDA2NTY3JyxcclxuICAgIHNoYXJlOiB7XHJcbiAgICAgIGRlc2t0b3A6ICdodHRwczovL3d3dy54aW5nLmNvbS9hcHAvdXNlcj9vcD1zaGFyZSYnLFxyXG4gICAgICBhbmRyb2lkOiAnaHR0cHM6Ly93d3cueGluZy5jb20vYXBwL3VzZXI/b3A9c2hhcmUmJyxcclxuICAgICAgaW9zOiAnaHR0cHM6Ly93d3cueGluZy5jb20vYXBwL3VzZXI/b3A9c2hhcmUmJyxcclxuICAgICAgb3BlcmF0b3JzOiBtZXRhVGFnc09wZXJhdG9ycyxcclxuICAgICAgbWV0YVRhZ3M6IHtcclxuICAgICAgICB1cmw6ICd1cmwnXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIHNtczoge1xyXG4gICAgdHlwZTogJ3NtcycsXHJcbiAgICB0ZXh0OiAnU01TJyxcclxuICAgIGljb246ICdjb21tZW50LWFsdCcsXHJcbiAgICBjb2xvcjogJyMyMGMxNmMnLFxyXG4gICAgc2hhcmU6IHtcclxuICAgICAgZGVza3RvcDogJ3Ntczo/JyxcclxuICAgICAgYW5kcm9pZDogJ3Ntczo/JyxcclxuICAgICAgaW9zOiAnc21zOiYnLFxyXG4gICAgICBtZXRhVGFnczoge1xyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnYm9keSdcclxuICAgICAgfSxcclxuICAgICAgb3BlcmF0b3JzOiBbXHJcbiAgICAgICAgLi4udXJsSW5NZXNzYWdlT3BlcmF0b3JzLFxyXG4gICAgICAgIC4uLm1ldGFUYWdzT3BlcmF0b3JzXHJcbiAgICAgIF1cclxuICAgIH1cclxuICB9LFxyXG4gIGVtYWlsOiB7XHJcbiAgICB0eXBlOiAnZW1haWwnLFxyXG4gICAgdGV4dDogJ0VtYWlsJyxcclxuICAgIGljb246ICAnZW52ZWxvcGUnLFxyXG4gICAgY29sb3I6ICcjRkY5NjFDJyxcclxuICAgIHNoYXJlOiB7XHJcbiAgICAgIGRlc2t0b3A6ICdtYWlsdG86PycsXHJcbiAgICAgIGFuZHJvaWQ6ICdtYWlsdG86PycsXHJcbiAgICAgIGlvczogJ21haWx0bzo/JyxcclxuICAgICAgb3BlcmF0b3JzOiBbXHJcbiAgICAgICAgLi4udXJsSW5NZXNzYWdlT3BlcmF0b3JzLFxyXG4gICAgICAgIC4uLm1ldGFUYWdzT3BlcmF0b3JzXHJcbiAgICAgIF0sXHJcbiAgICAgIG1ldGFUYWdzOiB7XHJcbiAgICAgICAgdGl0bGU6ICdzdWJqZWN0JyxcclxuICAgICAgICBkZXNjcmlwdGlvbjogJ2JvZHknXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIGNvcHk6IHtcclxuICAgIHR5cGU6ICdjb3B5JyxcclxuICAgIHRleHQ6ICdDb3B5IGxpbmsnLFxyXG4gICAgc3VjY2Vzc1RleHQ6ICdDb3BpZWQnLFxyXG4gICAgc3VjY2Vzc0ljb246ICdjaGVjaycsXHJcbiAgICBmYWlsVGV4dDogJ0Vycm9yJyxcclxuICAgIGZhaWxJY29uOiAnZXhjbGFtYXRpb24nLFxyXG4gICAgaWNvbjogJ2xpbmsnLFxyXG4gICAgY29sb3I6ICcjNjA3RDhCJyxcclxuICAgIHNoYXJlOiB7XHJcbiAgICAgIG9wZXJhdG9yczogY29weU9wZXJhdG9yc1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgcHJpbnQ6IHtcclxuICAgIHR5cGU6ICdwcmludCcsXHJcbiAgICB0ZXh0OiAnUHJpbnQnLFxyXG4gICAgaWNvbjogJ3ByaW50JyxcclxuICAgIGNvbG9yOiAnIzc2NUFBMicsXHJcbiAgICBzaGFyZToge1xyXG4gICAgICBvcGVyYXRvcnM6IHByaW50T3BlcmF0b3JzXHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG4iLCJpbXBvcnQgeyBJbmplY3QsIEluamVjdGFibGUsIE9wdGlvbmFsIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBJU2hhcmVCdXR0b24sIFNoYXJlQnV0dG9uc0NvbmZpZywgQ09ORklHIH0gZnJvbSAnLi9zaGFyZS5tb2RlbHMnO1xyXG5pbXBvcnQgeyBzaGFyZUJ1dHRvbnNQcm9wIH0gZnJvbSAnLi9zaGFyZS5wcm9wJztcclxuaW1wb3J0IHsgbWVyZ2VEZWVwIH0gZnJvbSAnLi91dGlscyc7XHJcblxyXG5ASW5qZWN0YWJsZSh7XHJcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBTaGFyZVNlcnZpY2Uge1xyXG5cclxuICBjb25maWc6IFNoYXJlQnV0dG9uc0NvbmZpZyA9IHtcclxuICAgIHByb3A6IHNoYXJlQnV0dG9uc1Byb3AsXHJcbiAgICBvcHRpb25zOiB7XHJcbiAgICAgIHRoZW1lOiAnZGVmYXVsdCcsXHJcbiAgICAgIGluY2x1ZGU6IFtdLFxyXG4gICAgICBleGNsdWRlOiBbXSxcclxuICAgICAgc2l6ZTogMCxcclxuICAgICAgdXJsOiBudWxsLFxyXG4gICAgICB0aXRsZTogbnVsbCxcclxuICAgICAgZGVzY3JpcHRpb246IG51bGwsXHJcbiAgICAgIGltYWdlOiBudWxsLFxyXG4gICAgICB0YWdzOiBudWxsLFxyXG4gICAgICB0d2l0dGVyQWNjb3VudDogbnVsbCxcclxuICAgICAgYXV0b1NldE1ldGE6IHRydWUsXHJcbiAgICAgIGdhVHJhY2tpbmc6IGZhbHNlLFxyXG4gICAgICB3aW5kb3dXaWR0aDogODAwLFxyXG4gICAgICB3aW5kb3dIZWlnaHQ6IDUwMCxcclxuICAgICAgbW9yZUJ1dHRvbkljb246ICdlbGxpcHNpcy1oJyxcclxuICAgICAgbGVzc0J1dHRvbkljb246ICdtaW51cydcclxuICAgIH1cclxuICB9O1xyXG4gIGNvbmZpZyQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KHRoaXMuY29uZmlnKTtcclxuXHJcbiAgY29uc3RydWN0b3IoQE9wdGlvbmFsKCkgQEluamVjdChDT05GSUcpIGNvbmZpZzogU2hhcmVCdXR0b25zQ29uZmlnKSB7XHJcbiAgICB0aGlzLnNldENvbmZpZyhjb25maWcpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHByb3AoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jb25maWcucHJvcDtcclxuICB9XHJcblxyXG4gIGdldCB0d2l0dGVyQWNjb3VudCgpIHtcclxuICAgIHJldHVybiB0aGlzLmNvbmZpZy5vcHRpb25zLnR3aXR0ZXJBY2NvdW50O1xyXG4gIH1cclxuXHJcbiAgZ2V0IHRoZW1lKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLm9wdGlvbnMudGhlbWU7XHJcbiAgfVxyXG5cclxuICBnZXQgd2luZG93U2l6ZSgpIHtcclxuICAgIHJldHVybiBgd2lkdGg9JHt0aGlzLmNvbmZpZy5vcHRpb25zLndpbmRvd1dpZHRofSwgaGVpZ2h0PSR7dGhpcy5jb25maWcub3B0aW9ucy53aW5kb3dIZWlnaHR9YDtcclxuICB9XHJcblxyXG4gIGdldCB1cmwoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jb25maWcub3B0aW9ucy51cmw7XHJcbiAgfVxyXG5cclxuICBnZXQgdGl0bGUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jb25maWcub3B0aW9ucy50aXRsZTtcclxuICB9XHJcblxyXG4gIGdldCBkZXNjcmlwdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLmNvbmZpZy5vcHRpb25zLmRlc2NyaXB0aW9uO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGltYWdlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLm9wdGlvbnMuaW1hZ2U7XHJcbiAgfVxyXG5cclxuICBnZXQgdGFncygpIHtcclxuICAgIHJldHVybiB0aGlzLmNvbmZpZy5vcHRpb25zLnRhZ3M7XHJcbiAgfVxyXG5cclxuICBnZXQgYXV0b1NldE1ldGEoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5jb25maWcub3B0aW9ucy5hdXRvU2V0TWV0YTtcclxuICB9XHJcblxyXG4gIGdldCBnYVRyYWNraW5nKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLm9wdGlvbnMuZ2FUcmFja2luZztcclxuICB9XHJcblxyXG4gIGdldCBzaXplKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuY29uZmlnLm9wdGlvbnMuc2l6ZTtcclxuICB9XHJcblxyXG4gIHNldENvbmZpZyhjb25maWc6IFNoYXJlQnV0dG9uc0NvbmZpZykge1xyXG4gICAgaWYgKGNvbmZpZykge1xyXG4gICAgICB0aGlzLmNvbmZpZyA9IG1lcmdlRGVlcCh0aGlzLmNvbmZpZywgY29uZmlnKTtcclxuICAgICAgdGhpcy5jb25maWckLm5leHQodGhpcy5jb25maWcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYWRkQnV0dG9uKG5hbWU6IHN0cmluZywgZGF0YTogSVNoYXJlQnV0dG9uKSB7XHJcbiAgICBjb25zdCBjb25maWcgPSB7XHJcbiAgICAgIHByb3A6IHsuLi5zaGFyZUJ1dHRvbnNQcm9wLCAuLi57W25hbWVdOiBkYXRhfX1cclxuICAgIH07XHJcbiAgICB0aGlzLnNldENvbmZpZyhjb25maWcpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQge1xyXG4gIERpcmVjdGl2ZSxcclxuICBJbnB1dCxcclxuICBPdXRwdXQsXHJcbiAgSG9zdExpc3RlbmVyLFxyXG4gIEluamVjdCxcclxuICBPbkNoYW5nZXMsXHJcbiAgT25EZXN0cm95LFxyXG4gIFNpbXBsZUNoYW5nZXMsXHJcbiAgRXZlbnRFbWl0dGVyLFxyXG4gIEVsZW1lbnRSZWYsXHJcbiAgUmVuZGVyZXIyLFxyXG4gIENoYW5nZURldGVjdG9yUmVmXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IERPQ1VNRU5UIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcclxuaW1wb3J0IHsgSHR0cENsaWVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcclxuaW1wb3J0IHsgTWV0YSB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXInO1xyXG5pbXBvcnQgeyBQbGF0Zm9ybSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9wbGF0Zm9ybSc7XHJcblxyXG5pbXBvcnQgeyBvZiwgaW50ZXJ2YWwsIE9ic2VydmFibGUsIFN1YnNjcmlwdGlvbiwgU3Vic2NyaXB0aW9uTGlrZSwgRU1QVFkgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgdGFwLCB0YWtlLCBzd2l0Y2hNYXAsIHRha2VXaGlsZSwgZmluYWxpemUsIGNhdGNoRXJyb3IgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XHJcblxyXG5pbXBvcnQgeyBTaGFyZVNlcnZpY2UgfSBmcm9tICcuL3NoYXJlLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBJU2hhcmVCdXR0b24sIElTaGFyZUNvdW50LCBTaGFyZUJ1dHRvblJlZiB9IGZyb20gJy4vc2hhcmUubW9kZWxzJztcclxuaW1wb3J0IHsgZ2V0VmFsaWRVcmwgfSBmcm9tICcuL3V0aWxzJztcclxuXHJcbkBEaXJlY3RpdmUoe1xyXG4gIHNlbGVjdG9yOiAnW3NoYXJlQnV0dG9uXSwgW3NoYXJlLWJ1dHRvbl0nXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBTaGFyZURpcmVjdGl2ZSBpbXBsZW1lbnRzIE9uQ2hhbmdlcywgT25EZXN0cm95IHtcclxuXHJcbiAgLyoqIEEgcmVmIHRvIGJ1dHRvbiBjbGFzcyAtIHVzZWQgdG8gcmVtb3ZlIHByZXZpb3VzIGNsYXNzIHdoZW4gdGhlIGJ1dHRvbiB0eXBlIGlzIGNoYW5nZWQgKi9cclxuICBwcml2YXRlIF9idXR0b25DbGFzczogc3RyaW5nO1xyXG5cclxuICAvKiogc2hhcmUgd2luZG93IGNsb3NlZCBzdWJzY3JpcHRpb24gKHRvIHVuc3Vic2NyaWJlIGlmIHRoZSBidXR0b24gaXMgZGVzdHJveWVkIGJlZm9yZSB0aGUgc2hhcmUgd2luZG93IGNsb3NlcykgKi9cclxuICBwcml2YXRlIF9zaGFyZVdpbmRvd0Nsb3NlZDogU3Vic2NyaXB0aW9uTGlrZSA9IFN1YnNjcmlwdGlvbi5FTVBUWTtcclxuXHJcbiAgLyoqIEJ1dHRvbiBwcm9wZXJ0aWVzICovXHJcbiAgcHJvcDogSVNoYXJlQnV0dG9uO1xyXG5cclxuICAvKiogU2hhcmUgYnV0dG9uIHR5cGUgKi9cclxuICBASW5wdXQoKSBzaGFyZUJ1dHRvbjogc3RyaW5nO1xyXG5cclxuICAvKiogR2V0IHNoYXJlIGNvdW50ICovXHJcbiAgQElucHV0KCkgZ2V0Q291bnQgPSBmYWxzZTtcclxuXHJcbiAgLyoqIFNldCBtZXRhIHRhZ3MgZnJvbSBkb2N1bWVudCBoZWFkLCB1c2VmdWwgd2hlbiBTRU8gaXMgc3VwcG9ydGVkICovXHJcbiAgQElucHV0KCkgYXV0b1NldE1ldGE6IGJvb2xlYW4gPSB0aGlzLnNoYXJlU2VydmljZS5hdXRvU2V0TWV0YTtcclxuXHJcbiAgLyoqIE1ldGEgdGFncyBpbnB1dHMgLSBpbml0aWFsaXplZCBmcm9tIHRoZSBnbG9iYWwgb3B0aW9ucyAqL1xyXG4gIEBJbnB1dCgpIHVybDogc3RyaW5nID0gdGhpcy5zaGFyZVNlcnZpY2UudXJsO1xyXG4gIEBJbnB1dCgpIHRpdGxlOiBzdHJpbmcgPSB0aGlzLnNoYXJlU2VydmljZS50aXRsZTtcclxuICBASW5wdXQoKSBkZXNjcmlwdGlvbjogc3RyaW5nID0gdGhpcy5zaGFyZVNlcnZpY2UuZGVzY3JpcHRpb247XHJcbiAgQElucHV0KCkgaW1hZ2U6IHN0cmluZyA9IHRoaXMuc2hhcmVTZXJ2aWNlLmltYWdlO1xyXG4gIEBJbnB1dCgpIHRhZ3M6IHN0cmluZyA9IHRoaXMuc2hhcmVTZXJ2aWNlLnRhZ3M7XHJcblxyXG4gIC8qKiBTdHJlYW0gdGhhdCBlbWl0cyB3aGVuIHNoYXJlIGNvdW50IGlzIGZldGNoZWQgKi9cclxuICBAT3V0cHV0KCkgY291bnQgPSBuZXcgRXZlbnRFbWl0dGVyPG51bWJlcj4oKTtcclxuXHJcbiAgLyoqIFN0cmVhbSB0aGF0IGVtaXRzIHdoZW4gc2hhcmUgZGlhbG9nIGlzIG9wZW5lZCAqL1xyXG4gIEBPdXRwdXQoKSBvcGVuZWQgPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcclxuXHJcbiAgLyoqIFN0cmVhbSB0aGF0IGVtaXRzIHdoZW4gc2hhcmUgZGlhbG9nIGlzIGNsb3NlZCAqL1xyXG4gIEBPdXRwdXQoKSBjbG9zZWQgPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBtZXRhOiBNZXRhLFxyXG4gICAgICAgICAgICAgIHByaXZhdGUgZWw6IEVsZW1lbnRSZWYsXHJcbiAgICAgICAgICAgICAgcHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50LFxyXG4gICAgICAgICAgICAgIHByaXZhdGUgcGxhdGZvcm06IFBsYXRmb3JtLFxyXG4gICAgICAgICAgICAgIHByaXZhdGUgcmVuZGVyZXI6IFJlbmRlcmVyMixcclxuICAgICAgICAgICAgICBwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgICAgICAgICAgICBwcml2YXRlIHNoYXJlU2VydmljZTogU2hhcmVTZXJ2aWNlLFxyXG4gICAgICAgICAgICAgIEBJbmplY3QoRE9DVU1FTlQpIHByaXZhdGUgZG9jdW1lbnQ6IGFueSkge1xyXG4gIH1cclxuXHJcbiAgLyoqIFNoYXJlIGxpbmsgb24gZWxlbWVudCBjbGljayAqL1xyXG4gIEBIb3N0TGlzdGVuZXIoJ2NsaWNrJylcclxuICBvbkNsaWNrKCkge1xyXG4gICAgaWYgKHRoaXMucGxhdGZvcm0uaXNCcm93c2VyKSB7XHJcbiAgICAgIGNvbnN0IG1ldGFUYWdzID0gdGhpcy5hdXRvU2V0TWV0YSA/IHtcclxuICAgICAgICB1cmw6IHRoaXMudXJsLFxyXG4gICAgICAgIHRpdGxlOiB0aGlzLnRpdGxlIHx8IHRoaXMuZ2V0TWV0YVRhZ0NvbnRlbnQoJ29nOnRpdGxlJyksXHJcbiAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24gfHwgdGhpcy5nZXRNZXRhVGFnQ29udGVudCgnb2c6ZGVzY3JpcHRpb24nKSxcclxuICAgICAgICBpbWFnZTogdGhpcy5pbWFnZSB8fCB0aGlzLmdldE1ldGFUYWdDb250ZW50KCdvZzppbWFnZScpLFxyXG4gICAgICAgIHZpYTogdGhpcy5zaGFyZVNlcnZpY2UudHdpdHRlckFjY291bnQsXHJcbiAgICAgICAgdGFnczogdGhpcy50YWdzLFxyXG4gICAgICB9IDoge1xyXG4gICAgICAgIHVybDogdGhpcy51cmwsXHJcbiAgICAgICAgdGl0bGU6IHRoaXMudGl0bGUsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgaW1hZ2U6IHRoaXMuaW1hZ2UsXHJcbiAgICAgICAgdGFnczogdGhpcy50YWdzLFxyXG4gICAgICAgIHZpYTogdGhpcy5zaGFyZVNlcnZpY2UudHdpdHRlckFjY291bnQsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBTaGFyZSB0aGUgbGlua1xyXG4gICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgIG9mPFNoYXJlQnV0dG9uUmVmPih7XHJcbiAgICAgICAgZWw6IHRoaXMuZWwubmF0aXZlRWxlbWVudCxcclxuICAgICAgICByZW5kZXJlcjogdGhpcy5yZW5kZXJlcixcclxuICAgICAgICBwcm9wOiB0aGlzLnByb3AsXHJcbiAgICAgICAgY2Q6IHRoaXMuY2QsXHJcbiAgICAgICAgZG9jdW1lbnQ6IHRoaXMuZG9jdW1lbnQsXHJcbiAgICAgICAgcGxhdGZvcm06IHRoaXMuZ2V0UGxhdGZvcm0oKSxcclxuICAgICAgICBtZXRhVGFnc1xyXG4gICAgICB9KS5waXBlKFxyXG4gICAgICAgIC4uLnRoaXMucHJvcC5zaGFyZS5vcGVyYXRvcnMsXHJcbiAgICAgICAgdGFwKChzaGFyZXJVUkw6IGFueSkgPT4gdGhpcy5zaGFyZShzaGFyZXJVUkwpKSxcclxuICAgICAgICB0YWtlKDEpXHJcbiAgICAgICkuc3Vic2NyaWJlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKSB7XHJcbiAgICBpZiAodGhpcy5wbGF0Zm9ybS5pc0Jyb3dzZXIpIHtcclxuXHJcbiAgICAgIGlmIChjaGFuZ2VzWydzaGFyZUJ1dHRvbiddICYmIChjaGFuZ2VzWydzaGFyZUJ1dHRvbiddLmZpcnN0Q2hhbmdlIHx8IGNoYW5nZXNbJ3NoYXJlQnV0dG9uJ10ucHJldmlvdXNWYWx1ZSAhPT0gdGhpcy5zaGFyZUJ1dHRvbikpIHtcclxuICAgICAgICB0aGlzLmNyZWF0ZVNoYXJlQnV0dG9uKHRoaXMuc2hhcmVCdXR0b24pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoIXRoaXMudXJsIHx8IChjaGFuZ2VzWyd1cmwnXSAmJiBjaGFuZ2VzWyd1cmwnXS5wcmV2aW91c1ZhbHVlICE9PSB0aGlzLnVybCkpIHtcclxuICAgICAgICB0aGlzLnVybCA9IGdldFZhbGlkVXJsKFxyXG4gICAgICAgICAgdGhpcy5hdXRvU2V0TWV0YVxyXG4gICAgICAgICAgICA/IHRoaXMudXJsIHx8IHRoaXMuZ2V0TWV0YVRhZ0NvbnRlbnQoJ29nOnVybCcpXHJcbiAgICAgICAgICAgIDogdGhpcy51cmwsXHJcbiAgICAgICAgICB0aGlzLmRvY3VtZW50LmRlZmF1bHRWaWV3LmxvY2F0aW9uLmhyZWZcclxuICAgICAgICApO1xyXG4gICAgICAgIGlmICh0aGlzLmdldENvdW50ICYmIHRoaXMucHJvcC5jb3VudCkge1xyXG4gICAgICAgICAgdGhpcy5zaGFyZUNvdW50KHRoaXMudXJsKS5zdWJzY3JpYmUoKGNvdW50OiBudW1iZXIpID0+IHRoaXMuY291bnQuZW1pdChjb3VudCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICB0aGlzLl9zaGFyZVdpbmRvd0Nsb3NlZC51bnN1YnNjcmliZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogT3BlbiBzaGFyaW5nIGRpYWxvZ1xyXG4gICAqIEBwYXJhbSB1cmwgLSBTaGFyZSBVUkxcclxuICAgKi9cclxuICBzaGFyZSh1cmw6IHN0cmluZykge1xyXG4gICAgaWYgKHVybCkge1xyXG5cclxuICAgICAgLy8gR0EgVHJhY2tpbmdcclxuICAgICAgaWYgKHRoaXMuc2hhcmVTZXJ2aWNlLmdhVHJhY2tpbmcgJiYgKDxhbnk+dGhpcy5kb2N1bWVudC5kZWZhdWx0VmlldykuZ2EpIHtcclxuICAgICAgICAoPGFueT50aGlzLmRvY3VtZW50LmRlZmF1bHRWaWV3KS5nYSgnc2VuZCcsICdzb2NpYWwnLCB0aGlzLnByb3AudHlwZSwgJ2NsaWNrJywgdGhpcy51cmwpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBPcGVuIHNoYXJlIHBvcCB1cCBhbmQgYWN0aXZhdGUgaXRzIG9wZW5lZCBhbmQgY2xvc2VkIGV2ZW50c1xyXG4gICAgICB0aGlzLl9zaGFyZVdpbmRvd0Nsb3NlZCA9IG9mKHRoaXMuZG9jdW1lbnQuZGVmYXVsdFZpZXcub3Blbih1cmwsICduZXd3aW5kb3cnLCB0aGlzLnNoYXJlU2VydmljZS53aW5kb3dTaXplKSkucGlwZShcclxuICAgICAgICB0YXAoKCkgPT4gdGhpcy5vcGVuZWQuZW1pdCh0aGlzLnByb3AudHlwZSkpLFxyXG4gICAgICAgIHN3aXRjaE1hcCgocG9wVXA6IGFueSkgPT4gaW50ZXJ2YWwoMjAwKS5waXBlKHRha2VXaGlsZSgoKSA9PiAhcG9wVXAuY2xvc2VkKSkpLFxyXG4gICAgICAgIGZpbmFsaXplKCgpID0+IHRoaXMuY2xvc2VkLmVtaXQodGhpcy5wcm9wLnR5cGUpKVxyXG4gICAgICApLnN1YnNjcmliZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2hhcmVDb3VudChzaGFyZVVybDogc3RyaW5nKTogT2JzZXJ2YWJsZTxudW1iZXI+IHtcclxuICAgIGNvbnN0IG9wdGlvbnM6IElTaGFyZUNvdW50ID0gdGhpcy5wcm9wLmNvdW50O1xyXG4gICAgcmV0dXJuIG9wdGlvbnMucmVxdWVzdCA9PT0gJ2pzb25wJ1xyXG4gICAgICA/XHJcbiAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgdGhpcy5odHRwLmpzb25wPGFueT4ob3B0aW9ucy51cmwgKyBzaGFyZVVybCwgJ2NhbGxiYWNrJykucGlwZShcclxuICAgICAgICAuLi5vcHRpb25zLm9wZXJhdG9ycyxcclxuICAgICAgICBjYXRjaEVycm9yKCgpID0+IEVNUFRZKSxcclxuICAgICAgKVxyXG4gICAgICA6XHJcbiAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgdGhpcy5odHRwLmdldDxhbnk+KG9wdGlvbnMudXJsICsgc2hhcmVVcmwsIG9wdGlvbnMuYXJncykucGlwZShcclxuICAgICAgICAuLi5vcHRpb25zLm9wZXJhdG9ycyxcclxuICAgICAgICBjYXRjaEVycm9yKCgpID0+IEVNUFRZKVxyXG4gICAgICApO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjcmVhdGVTaGFyZUJ1dHRvbihidXR0b25zTmFtZTogc3RyaW5nKSB7XHJcblxyXG4gICAgY29uc3QgYnV0dG9uOiBJU2hhcmVCdXR0b24gPSB7Li4udGhpcy5zaGFyZVNlcnZpY2UucHJvcFtidXR0b25zTmFtZV19O1xyXG5cclxuICAgIGlmIChidXR0b24pIHtcclxuICAgICAgLy8gU2V0IHNoYXJlIGJ1dHRvbiBwcm9wZXJ0aWVzXHJcbiAgICAgIHRoaXMucHJvcCA9IGJ1dHRvbjtcclxuXHJcbiAgICAgIC8vIFJlbW92ZSBwcmV2aW91cyBidXR0b24gY2xhc3NcclxuICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIGBzYi0ke3RoaXMuX2J1dHRvbkNsYXNzfWApO1xyXG5cclxuICAgICAgLy8gQWRkIG5ldyBidXR0b24gY2xhc3NcclxuICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIGBzYi0ke2J1dHRvbi50eXBlfWApO1xyXG5cclxuICAgICAgLy8gU2V0IGJ1dHRvbiBjc3MgY29sb3IgdmFyaWFibGVcclxuICAgICAgdGhpcy5lbC5uYXRpdmVFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLWJ1dHRvbi1jb2xvcicsIHRoaXMucHJvcC5jb2xvcik7XHJcblxyXG4gICAgICAvLyBLZWVwIGEgY29weSBvZiB0aGUgY2xhc3MgZm9yIGZ1dHVyZSByZXBsYWNlbWVudFxyXG4gICAgICB0aGlzLl9idXR0b25DbGFzcyA9IGJ1dHRvbi50eXBlO1xyXG5cclxuICAgICAgLy8gU2V0IGFyaWEtbGFiZWwgYXR0cmlidXRlXHJcbiAgICAgIHRoaXMucmVuZGVyZXIuc2V0QXR0cmlidXRlKHRoaXMuZWwubmF0aXZlRWxlbWVudCwgJ2FyaWEtbGFiZWwnLCBidXR0b24uYXJpYUxhYmVsIHx8IGJ1dHRvbi50ZXh0KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgW1NoYXJlQnV0dG9uc106IFRoZSBzaGFyZSBidXR0b24gJyR7YnV0dG9uc05hbWV9JyBkb2VzIG5vdCBleGlzdCFgKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKiBHZXQgbWV0YSB0YWcgY29udGVudCAqL1xyXG4gIHByaXZhdGUgZ2V0TWV0YVRhZ0NvbnRlbnQoa2V5OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgbWV0YVVzaW5nUHJvcGVydHk6IEhUTUxNZXRhRWxlbWVudCA9IHRoaXMubWV0YS5nZXRUYWcoYHByb3BlcnR5PVwiJHtrZXl9XCJgKTtcclxuICAgIGlmIChtZXRhVXNpbmdQcm9wZXJ0eSkgcmV0dXJuIG1ldGFVc2luZ1Byb3BlcnR5LmdldEF0dHJpYnV0ZSgnY29udGVudCcpO1xyXG4gICAgY29uc3QgbWV0YVVzaW5nTmFtZTogSFRNTE1ldGFFbGVtZW50ID0gdGhpcy5tZXRhLmdldFRhZyhgbmFtZT1cIiR7a2V5fVwiYCk7XHJcbiAgICBpZiAobWV0YVVzaW5nTmFtZSkgcmV0dXJuIG1ldGFVc2luZ05hbWUuZ2V0QXR0cmlidXRlKCdjb250ZW50Jyk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFBsYXRmb3JtKCkge1xyXG4gICAgaWYgKHRoaXMucGxhdGZvcm0uSU9TKSByZXR1cm4gJ29pcyc7XHJcbiAgICBpZiAodGhpcy5wbGF0Zm9ybS5BTkRST0lEKSByZXR1cm4gJ2FuZHJvaWQnO1xyXG4gICAgcmV0dXJuICdkZXNrdG9wJztcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUGlwZSwgUGlwZVRyYW5zZm9ybSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBzaGFyZUNvdW50Rm9ybWF0dGVyIH0gZnJvbSAnLi91dGlscyc7XHJcblxyXG5AUGlwZSh7XHJcbiAgbmFtZTogJ3NoYXJlQ291bnQnXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBTaGFyZUNvdW50UGlwZSBpbXBsZW1lbnRzIFBpcGVUcmFuc2Zvcm0ge1xyXG4gIHRyYW5zZm9ybShudW06IG51bWJlciwgZGlnaXRzPzogbnVtYmVyKSB7XHJcbiAgICByZXR1cm4gc2hhcmVDb3VudEZvcm1hdHRlcihudW0sIGRpZ2l0cyk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IE5nTW9kdWxlLCBNb2R1bGVXaXRoUHJvdmlkZXJzIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFBsYXRmb3JtTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL3BsYXRmb3JtJztcclxuXHJcbmltcG9ydCB7IFNoYXJlRGlyZWN0aXZlIH0gZnJvbSAnLi9zaGFyZS1idXR0b24uZGlyZWN0aXZlJztcclxuaW1wb3J0IHsgU2hhcmVDb3VudFBpcGUgfSBmcm9tICcuL3NoYXJlLWNvdW50LnBpcGUnO1xyXG5pbXBvcnQgeyBTaGFyZUJ1dHRvbnNDb25maWcsIENPTkZJRyB9IGZyb20gJy4vc2hhcmUubW9kZWxzJztcclxuXHJcbkBOZ01vZHVsZSh7XHJcbiAgaW1wb3J0czogW1xyXG4gICAgUGxhdGZvcm1Nb2R1bGVcclxuICBdLFxyXG4gIGRlY2xhcmF0aW9uczogW1xyXG4gICAgU2hhcmVEaXJlY3RpdmUsXHJcbiAgICBTaGFyZUNvdW50UGlwZVxyXG4gIF0sXHJcbiAgZXhwb3J0czogW1xyXG4gICAgU2hhcmVEaXJlY3RpdmUsXHJcbiAgICBTaGFyZUNvdW50UGlwZVxyXG4gIF1cclxufSlcclxuZXhwb3J0IGNsYXNzIFNoYXJlTW9kdWxlIHtcclxuICBzdGF0aWMgZm9yUm9vdChjb25maWc/OiBTaGFyZUJ1dHRvbnNDb25maWcpOiBNb2R1bGVXaXRoUHJvdmlkZXJzIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5nTW9kdWxlOiBTaGFyZU1vZHVsZSxcclxuICAgICAgcHJvdmlkZXJzOiBbXHJcbiAgICAgICAge3Byb3ZpZGU6IENPTkZJRywgdXNlVmFsdWU6IGNvbmZpZ31cclxuICAgICAgXVxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBO0FBR0EsTUFBYSxNQUFNLEdBQUcsSUFBSSxjQUFjLENBQXFCLHNCQUFzQixDQUFDOzs7Ozs7QUNIcEY7Ozs7O0FBS0EsU0FBUyxRQUFRLENBQUMsSUFBSTtJQUNwQixRQUFRLElBQUksSUFBSSxPQUFPLElBQUksS0FBSyxRQUFRLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFO0NBQ25FOzs7Ozs7O0FBR0QsU0FBZ0IsU0FBUyxDQUFDLE1BQU0sRUFBRSxHQUFHLE9BQU87SUFDMUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUU7UUFDbkIsT0FBTyxNQUFNLENBQUM7S0FDZjs7VUFDSyxNQUFNLEdBQUcsT0FBTyxDQUFDLEtBQUssRUFBRTtJQUU5QixJQUFJLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUU7UUFDeEMsS0FBSyxNQUFNLEdBQUcsSUFBSSxNQUFNLEVBQUU7WUFDeEIsSUFBSSxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7Z0JBQ3pCLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUU7b0JBQ2hCLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQyxHQUFHLEdBQUcsRUFBRSxFQUFDLENBQUMsQ0FBQztpQkFDcEM7Z0JBQ0QsU0FBUyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQzthQUNyQztpQkFBTTtnQkFDTCxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxFQUFDLENBQUMsR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsRUFBQyxDQUFDLENBQUM7YUFDN0M7U0FDRjtLQUNGO0lBRUQsT0FBTyxTQUFTLENBQUMsTUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDLENBQUM7Q0FDdEM7Ozs7Ozs7QUFHRCxTQUFnQixtQkFBbUIsQ0FBQyxHQUFXLEVBQUUsTUFBYzs7VUFFdkQsRUFBRSxHQUFHO1FBQ1QsRUFBQyxLQUFLLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUM7UUFDekIsRUFBQyxLQUFLLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUM7UUFDekIsRUFBQyxLQUFLLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUM7S0FDMUI7O1VBQUUsRUFBRSxHQUFHLDBCQUEwQjtJQUVsQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNsQyxJQUFJLEdBQUcsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFO1lBQ3RCLE9BQU8sQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO1NBQzdFO0tBQ0Y7SUFDRCxPQUFPLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQztDQUM5Qzs7Ozs7O0FBR0QsU0FBZ0IsZUFBZSxDQUFDLEdBQW1CO0lBQ2pELE9BQU8sRUFBRSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUM5QixHQUFHLENBQUMsQ0FBQyxHQUFXOzs7Y0FHUixRQUFRLHNCQUE2QyxHQUFHLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsRUFBQTtRQUNqRyxRQUFRLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQztRQUNyQixHQUFHLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUM7O1FBR3hDLElBQUksR0FBRyxDQUFDLFFBQVEsS0FBSyxLQUFLLEVBQUU7O2tCQUNwQixLQUFLLEdBQUcsR0FBRyxDQUFDLFFBQVEsQ0FBQyxXQUFXLEVBQUU7WUFDeEMsS0FBSyxDQUFDLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxDQUFDOztrQkFDN0IsU0FBUyxHQUFHLEdBQUcsQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLFlBQVksRUFBRTtZQUN6RCxTQUFTLENBQUMsZUFBZSxFQUFFLENBQUM7WUFDNUIsU0FBUyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUMxQixRQUFRLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztZQUN6QixRQUFRLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1NBQ3ZDO2FBQU07WUFDTCxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUM7U0FDbkI7UUFDRCxHQUFHLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNqQyxHQUFHLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUM7S0FDekMsQ0FBQyxDQUNILENBQUM7Q0FDSDs7Ozs7OztBQUdELFNBQWdCLFdBQVcsQ0FBQyxHQUFXLEVBQUUsV0FBbUI7SUFDMUQsSUFBSSxHQUFHLEVBQUU7O2NBQ0QsQ0FBQyxHQUFHLCtFQUErRTtRQUN6RixJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO1lBQUUsT0FBTyxHQUFHLENBQUM7UUFDNUIsT0FBTyxDQUFDLElBQUksQ0FBQyxpQ0FBaUMsR0FBRyxlQUFlLENBQUMsQ0FBQztLQUNuRTtJQUNELE9BQU8sV0FBVyxDQUFDO0NBQ3BCOzs7Ozs7QUNyRkQ7Ozs7QUFRQSxNQUFhLGlCQUFpQixHQUFpQztJQUM3RCxHQUFHLENBQUMsQ0FBQyxHQUFtQjs7O2NBR2hCLFNBQVMsR0FBRyxHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDO1FBQzlDLElBQUksU0FBUyxFQUFFOzs7a0JBR1AsUUFBUSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVE7OztrQkFHbEMsY0FBYyxHQUFHLEdBQUcsQ0FBQyxRQUFROztnQkFFL0IsSUFBSSxHQUFHLEVBQUU7O1lBRWIsSUFBSSxRQUFRLEVBQUU7Z0JBQ1osSUFBSSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLEtBQ2pELGNBQWMsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLE9BQU8sSUFBSSxrQkFBa0IsQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FDbkYsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDYjtZQUNELE9BQU8sU0FBUyxHQUFHLElBQUksQ0FBQztTQUN6QjtRQUNELE9BQU87S0FDUixDQUFDO0NBQ0g7Ozs7O0FBS0QsTUFBYSxjQUFjLEdBQWlDO0lBQzFELEdBQUcsQ0FBQyxDQUFDLEdBQW1CLEtBQUssR0FBRyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLENBQUM7Q0FDL0Q7Ozs7O0FBS0QsTUFBYSxhQUFhLEdBQWlDO0lBQ3pELEdBQUcsQ0FBQyxDQUFDLEdBQW1COztRQUd0QixHQUFHLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLGdCQUFnQixFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBRXhELEdBQUcsQ0FBQyxJQUFJLEdBQUcsRUFBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFDLENBQUM7UUFDdEQsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHLEdBQUcsa0JBQWtCLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN4RCxPQUFPLEdBQUcsQ0FBQztLQUNaLENBQUM7SUFDRixTQUFTLENBQUMsQ0FBQyxHQUFtQixLQUFLLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQzFELEdBQUcsQ0FBQztRQUNGLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDO1FBQ3JDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDO1FBQ3JDLE9BQU8sR0FBRyxDQUFDO0tBQ1osQ0FBQyxFQUNGLFVBQVUsQ0FBQztRQUNULEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQ2xDLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQ2xDLE9BQU8sRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0tBQ2hCLENBQUMsQ0FDSCxDQUFDO0lBQ0YsR0FBRyxDQUFDLENBQUMsR0FBbUI7UUFDdEIsR0FBRyxDQUFDLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUN0QixPQUFPLEdBQUcsQ0FBQztLQUNaLENBQUM7SUFDRixLQUFLLENBQUMsSUFBSSxDQUFDO0lBQ1gsR0FBRyxDQUFDLENBQUMsR0FBbUI7O1FBR3RCLEdBQUcsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxDQUFDLENBQUM7O1FBR3hELEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQzlCLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQzlCLEdBQUcsQ0FBQyxFQUFFLENBQUMsWUFBWSxFQUFFLENBQUM7S0FDdkIsQ0FBQztDQUNIOzs7OztBQUtELE1BQWEscUJBQXFCLEdBQWlDO0lBQ2pFLEdBQUcsQ0FBQyxDQUFDLEdBQW1COztjQUNoQixXQUFXLEdBQUcsR0FBRyxDQUFDLFFBQVEsQ0FBQyxXQUFXOztjQUN0QyxHQUFHLEdBQUcsR0FBRyxDQUFDLFFBQVEsQ0FBQyxHQUFHOztjQUN0QixNQUFNLEdBQW1CO1lBQzdCLFFBQVEsRUFBRTtnQkFDUixXQUFXLEVBQUUsV0FBVyxHQUFHLEdBQUcsV0FBVyxPQUFPLEdBQUcsRUFBRSxHQUFHLEdBQUc7YUFDNUQ7U0FDRjtRQUNELE9BQU8sU0FBUyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztLQUMvQixDQUFDO0NBQ0g7O0FBRUQsTUFBYSxzQkFBc0IsR0FBaUM7SUFDbEUsR0FBRyxDQUFDLENBQUMsR0FBUSxLQUFLLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUM7Q0FDMUM7O0FBRUQsTUFBYSx1QkFBdUIsR0FBaUM7SUFDbkUsR0FBRyxDQUFDLENBQUMsSUFBWSxLQUFLLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyx1QkFBdUIsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQzlFLEdBQUcsQ0FBQyxDQUFDLEdBQVEsS0FBSyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUM7Q0FDOUI7O0FBRUQsTUFBYSxvQkFBb0IsR0FBaUM7SUFDaEUsR0FBRyxDQUFDLENBQUMsR0FBUSxLQUFLLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUM7Q0FDNUM7Ozs7OztBQzlHRDtBQVdBLE1BQWEsZ0JBQWdCLEdBQWtCO0lBQzdDLFFBQVEsRUFBRTtRQUNSLElBQUksRUFBRSxVQUFVO1FBQ2hCLElBQUksRUFBRSxVQUFVO1FBQ2hCLElBQUksRUFBRSxDQUFDLEtBQUssRUFBRSxZQUFZLENBQUM7UUFDM0IsS0FBSyxFQUFFLFNBQVM7UUFDaEIsS0FBSyxFQUFFO1lBQ0wsT0FBTyxFQUFFLDZDQUE2QztZQUN0RCxPQUFPLEVBQUUsNkNBQTZDO1lBQ3RELEdBQUcsRUFBRSw2Q0FBNkM7WUFDbEQsU0FBUyxFQUFFLGlCQUFpQjtZQUM1QixRQUFRLEVBQUU7Z0JBQ1IsR0FBRyxFQUFFLEdBQUc7YUFDVDtTQUNGO1FBQ0QsS0FBSyxFQUFFO1lBQ0wsT0FBTyxFQUFFLE1BQU07WUFDZixHQUFHLEVBQUUsZ0NBQWdDO1lBQ3JDLFNBQVMsRUFBRSxzQkFBc0I7U0FDbEM7S0FDRjtJQUNELE9BQU8sRUFBRTtRQUNQLElBQUksRUFBRSxTQUFTO1FBQ2YsSUFBSSxFQUFFLFNBQVM7UUFDZixJQUFJLEVBQUUsQ0FBQyxLQUFLLEVBQUUsU0FBUyxDQUFDO1FBQ3hCLEtBQUssRUFBRSxTQUFTO1FBQ2hCLEtBQUssRUFBRTtZQUNMLE9BQU8sRUFBRSxtQ0FBbUM7WUFDNUMsT0FBTyxFQUFFLG1DQUFtQztZQUM1QyxHQUFHLEVBQUUsbUNBQW1DO1lBQ3hDLFNBQVMsRUFBRSxpQkFBaUI7WUFDNUIsUUFBUSxFQUFFO2dCQUNSLEdBQUcsRUFBRSxLQUFLO2dCQUNWLFdBQVcsRUFBRSxNQUFNO2dCQUNuQixJQUFJLEVBQUUsVUFBVTtnQkFDaEIsR0FBRyxFQUFFLEtBQUs7YUFDWDtTQUNGO0tBQ0Y7SUFDRCxNQUFNLEVBQUU7UUFDTixJQUFJLEVBQUUsUUFBUTtRQUNkLElBQUksRUFBRSxTQUFTO1FBQ2YsSUFBSSxFQUFFLENBQUMsS0FBSyxFQUFFLGVBQWUsQ0FBQztRQUM5QixLQUFLLEVBQUUsU0FBUztRQUNoQixLQUFLLEVBQUU7WUFDTCxPQUFPLEVBQUUsZ0NBQWdDO1lBQ3pDLE9BQU8sRUFBRSxnQ0FBZ0M7WUFDekMsR0FBRyxFQUFFLGdDQUFnQztZQUNyQyxRQUFRLEVBQUU7Z0JBQ1IsR0FBRyxFQUFFLEtBQUs7YUFDWDtZQUNELFNBQVMsRUFBRSxpQkFBaUI7U0FDN0I7S0FDRjtJQUNELFFBQVEsRUFBRTtRQUNSLElBQUksRUFBRSxVQUFVO1FBQ2hCLElBQUksRUFBRSxVQUFVO1FBQ2hCLElBQUksRUFBRSxDQUFDLEtBQUssRUFBRSxhQUFhLENBQUM7UUFDNUIsS0FBSyxFQUFFLFNBQVM7UUFDaEIsS0FBSyxFQUFFO1lBQ0wsT0FBTyxFQUFFLHVDQUF1QztZQUNoRCxPQUFPLEVBQUUsdUNBQXVDO1lBQ2hELEdBQUcsRUFBRSx1Q0FBdUM7WUFDNUMsU0FBUyxFQUFFLGlCQUFpQjtZQUM1QixRQUFRLEVBQUU7Z0JBQ1IsR0FBRyxFQUFFLEtBQUs7Z0JBQ1YsS0FBSyxFQUFFLE9BQU87Z0JBQ2QsV0FBVyxFQUFFLFNBQVM7YUFDdkI7U0FDRjtLQUNGO0lBQ0QsU0FBUyxFQUFFO1FBQ1QsSUFBSSxFQUFFLFdBQVc7UUFDakIsSUFBSSxFQUFFLFdBQVc7UUFDakIsSUFBSSxFQUFFLENBQUMsS0FBSyxFQUFFLGFBQWEsQ0FBQztRQUM1QixLQUFLLEVBQUUsU0FBUztRQUNoQixLQUFLLEVBQUU7WUFDTCxPQUFPLEVBQUUsOENBQThDO1lBQ3ZELE9BQU8sRUFBRSw4Q0FBOEM7WUFDdkQsR0FBRyxFQUFFLDhDQUE4QztZQUNuRCxTQUFTLEVBQUUsaUJBQWlCO1lBQzVCLFFBQVEsRUFBRTtnQkFDUixHQUFHLEVBQUUsS0FBSztnQkFDVixXQUFXLEVBQUUsYUFBYTtnQkFDMUIsS0FBSyxFQUFFLE9BQU87YUFDZjtTQUNGO1FBQ0QsS0FBSyxFQUFFO1lBQ0wsT0FBTyxFQUFFLE1BQU07WUFDZixHQUFHLEVBQUUsbURBQW1EO1lBQ3hELElBQUksRUFBRSxFQUFDLFlBQVksRUFBRSxNQUFNLEVBQUM7WUFDNUIsU0FBUyxFQUFFLHVCQUF1QjtTQUNuQztLQUNGO0lBQ0QsTUFBTSxFQUFFO1FBQ04sSUFBSSxFQUFFLFFBQVE7UUFDZCxJQUFJLEVBQUUsUUFBUTtRQUNkLElBQUksRUFBRSxDQUFDLEtBQUssRUFBRSxjQUFjLENBQUM7UUFDN0IsS0FBSyxFQUFFLFNBQVM7UUFDaEIsS0FBSyxFQUFFO1lBQ0wsT0FBTyxFQUFFLCtCQUErQjtZQUN4QyxPQUFPLEVBQUUsK0JBQStCO1lBQ3hDLEdBQUcsRUFBRSwrQkFBK0I7WUFDcEMsU0FBUyxFQUFFLGlCQUFpQjtZQUM1QixRQUFRLEVBQUU7Z0JBQ1IsR0FBRyxFQUFFLEtBQUs7Z0JBQ1YsS0FBSyxFQUFFLE9BQU87YUFDZjtTQUNGO0tBQ0Y7SUFDRCxNQUFNLEVBQUU7UUFDTixJQUFJLEVBQUUsUUFBUTtRQUNkLElBQUksRUFBRSxRQUFRO1FBQ2QsSUFBSSxFQUFFLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQztRQUN2QixLQUFLLEVBQUUsU0FBUztRQUNoQixLQUFLLEVBQUU7WUFDTCxPQUFPLEVBQUUsdUNBQXVDO1lBQ2hELE9BQU8sRUFBRSx1Q0FBdUM7WUFDaEQsR0FBRyxFQUFFLHVDQUF1QztZQUM1QyxTQUFTLEVBQUUsaUJBQWlCO1lBQzVCLFFBQVEsRUFBRTtnQkFDUixHQUFHLEVBQUUsY0FBYztnQkFDbkIsV0FBVyxFQUFFLFNBQVM7Z0JBQ3RCLElBQUksRUFBRSxNQUFNO2FBQ2I7U0FDRjtRQUNELEtBQUssRUFBRTtZQUNMLE9BQU8sRUFBRSxPQUFPO1lBQ2hCLEdBQUcsRUFBRSw0Q0FBNEM7WUFDakQsU0FBUyxFQUFFLG9CQUFvQjtTQUNoQztLQUNGO0lBQ0QsUUFBUSxFQUFFO1FBQ1IsSUFBSSxFQUFFLFVBQVU7UUFDaEIsSUFBSSxFQUFFLFVBQVU7UUFDaEIsSUFBSSxFQUFFLENBQUMsS0FBSyxFQUFFLFVBQVUsQ0FBQztRQUN6QixLQUFLLEVBQUUsU0FBUztRQUNoQixLQUFLLEVBQUU7WUFDTCxPQUFPLEVBQUUsZ0NBQWdDO1lBQ3pDLE9BQU8sRUFBRSxrQkFBa0I7WUFDM0IsR0FBRyxFQUFFLGtCQUFrQjtZQUN2QixTQUFTLEVBQUU7Z0JBQ1QsR0FBRyxxQkFBcUI7Z0JBQ3hCLEdBQUcsaUJBQWlCO2FBQ3JCO1lBQ0QsUUFBUSxFQUFFO2dCQUNSLFdBQVcsRUFBRSxNQUFNO2FBQ3BCO1NBQ0Y7S0FDRjtJQUNELFNBQVMsRUFBRTtRQUNULElBQUksRUFBRSxXQUFXO1FBQ2pCLElBQUksRUFBRSxXQUFXO1FBQ2pCLElBQUksRUFBRSxDQUFDLEtBQUssRUFBRSxvQkFBb0IsQ0FBQztRQUNuQyxLQUFLLEVBQUUsU0FBUztRQUNoQixLQUFLLEVBQUU7WUFDTCxPQUFPLEVBQUUsd0JBQXdCO1lBQ2pDLEdBQUcsRUFBRSx3QkFBd0I7WUFDN0IsU0FBUyxFQUFFLGlCQUFpQjtZQUM1QixRQUFRLEVBQUU7Z0JBQ1IsR0FBRyxFQUFFLE1BQU07YUFDWjtTQUNGO0tBQ0Y7SUFDRCxRQUFRLEVBQUU7UUFDUixJQUFJLEVBQUUsVUFBVTtRQUNoQixJQUFJLEVBQUUsVUFBVTtRQUNoQixJQUFJLEVBQUUsQ0FBQyxLQUFLLEVBQUUsZ0JBQWdCLENBQUM7UUFDL0IsS0FBSyxFQUFFLFNBQVM7UUFDaEIsS0FBSyxFQUFFO1lBQ0wsT0FBTyxFQUFFLHlCQUF5QjtZQUNsQyxPQUFPLEVBQUUseUJBQXlCO1lBQ2xDLEdBQUcsRUFBRSx5QkFBeUI7WUFDOUIsU0FBUyxFQUFFLGlCQUFpQjtZQUM1QixRQUFRLEVBQUU7Z0JBQ1IsR0FBRyxFQUFFLEtBQUs7Z0JBQ1YsV0FBVyxFQUFFLE1BQU07YUFDcEI7U0FDRjtLQUNGO0lBQ0QsRUFBRSxFQUFFO1FBQ0YsSUFBSSxFQUFFLElBQUk7UUFDVixJQUFJLEVBQUUsV0FBVztRQUNqQixJQUFJLEVBQUUsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDO1FBQ25CLEtBQUssRUFBRSxTQUFTO1FBQ2hCLEtBQUssRUFBRTtZQUNMLE9BQU8sRUFBRSwwQkFBMEI7WUFDbkMsT0FBTyxFQUFFLDBCQUEwQjtZQUNuQyxHQUFHLEVBQUUsMEJBQTBCO1lBQy9CLFNBQVMsRUFBRSxpQkFBaUI7WUFDNUIsUUFBUSxFQUFFO2dCQUNSLEdBQUcsRUFBRSxLQUFLO2FBQ1g7U0FDRjtLQUNGO0lBQ0QsT0FBTyxFQUFFO1FBQ1AsSUFBSSxFQUFFLFNBQVM7UUFDZixJQUFJLEVBQUUsU0FBUztRQUNmLElBQUksRUFBRSxDQUFDLEtBQUssRUFBRSxhQUFhLENBQUM7UUFDNUIsS0FBSyxFQUFFLFNBQVM7UUFDaEIsS0FBSyxFQUFFO1lBQ0wsT0FBTyxFQUFFLG9DQUFvQztZQUM3QyxPQUFPLEVBQUUsb0NBQW9DO1lBQzdDLEdBQUcsRUFBRSxvQ0FBb0M7WUFDekMsU0FBUyxFQUFFLGlCQUFpQjtZQUM1QixRQUFRLEVBQUU7Z0JBQ1IsR0FBRyxFQUFFLEtBQUs7YUFDWDtTQUNGO0tBQ0Y7SUFDRCxJQUFJLEVBQUU7UUFDSixJQUFJLEVBQUUsTUFBTTtRQUNaLElBQUksRUFBRSxNQUFNO1FBQ1osSUFBSSxFQUFFLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQztRQUNyQixLQUFLLEVBQUUsU0FBUztRQUNoQixLQUFLLEVBQUU7WUFDTCxPQUFPLEVBQUUseUNBQXlDO1lBQ2xELE9BQU8sRUFBRSx5Q0FBeUM7WUFDbEQsR0FBRyxFQUFFLHlDQUF5QztZQUM5QyxTQUFTLEVBQUUsaUJBQWlCO1lBQzVCLFFBQVEsRUFBRTtnQkFDUixHQUFHLEVBQUUsS0FBSzthQUNYO1NBQ0Y7S0FDRjtJQUNELEdBQUcsRUFBRTtRQUNILElBQUksRUFBRSxLQUFLO1FBQ1gsSUFBSSxFQUFFLEtBQUs7UUFDWCxJQUFJLEVBQUUsYUFBYTtRQUNuQixLQUFLLEVBQUUsU0FBUztRQUNoQixLQUFLLEVBQUU7WUFDTCxPQUFPLEVBQUUsT0FBTztZQUNoQixPQUFPLEVBQUUsT0FBTztZQUNoQixHQUFHLEVBQUUsT0FBTztZQUNaLFFBQVEsRUFBRTtnQkFDUixXQUFXLEVBQUUsTUFBTTthQUNwQjtZQUNELFNBQVMsRUFBRTtnQkFDVCxHQUFHLHFCQUFxQjtnQkFDeEIsR0FBRyxpQkFBaUI7YUFDckI7U0FDRjtLQUNGO0lBQ0QsS0FBSyxFQUFFO1FBQ0wsSUFBSSxFQUFFLE9BQU87UUFDYixJQUFJLEVBQUUsT0FBTztRQUNiLElBQUksRUFBRyxVQUFVO1FBQ2pCLEtBQUssRUFBRSxTQUFTO1FBQ2hCLEtBQUssRUFBRTtZQUNMLE9BQU8sRUFBRSxVQUFVO1lBQ25CLE9BQU8sRUFBRSxVQUFVO1lBQ25CLEdBQUcsRUFBRSxVQUFVO1lBQ2YsU0FBUyxFQUFFO2dCQUNULEdBQUcscUJBQXFCO2dCQUN4QixHQUFHLGlCQUFpQjthQUNyQjtZQUNELFFBQVEsRUFBRTtnQkFDUixLQUFLLEVBQUUsU0FBUztnQkFDaEIsV0FBVyxFQUFFLE1BQU07YUFDcEI7U0FDRjtLQUNGO0lBQ0QsSUFBSSxFQUFFO1FBQ0osSUFBSSxFQUFFLE1BQU07UUFDWixJQUFJLEVBQUUsV0FBVztRQUNqQixXQUFXLEVBQUUsUUFBUTtRQUNyQixXQUFXLEVBQUUsT0FBTztRQUNwQixRQUFRLEVBQUUsT0FBTztRQUNqQixRQUFRLEVBQUUsYUFBYTtRQUN2QixJQUFJLEVBQUUsTUFBTTtRQUNaLEtBQUssRUFBRSxTQUFTO1FBQ2hCLEtBQUssRUFBRTtZQUNMLFNBQVMsRUFBRSxhQUFhO1NBQ3pCO0tBQ0Y7SUFDRCxLQUFLLEVBQUU7UUFDTCxJQUFJLEVBQUUsT0FBTztRQUNiLElBQUksRUFBRSxPQUFPO1FBQ2IsSUFBSSxFQUFFLE9BQU87UUFDYixLQUFLLEVBQUUsU0FBUztRQUNoQixLQUFLLEVBQUU7WUFDTCxTQUFTLEVBQUUsY0FBYztTQUMxQjtLQUNGO0NBQ0Y7Ozs7OztBQ3ZTRCxNQVNhLFlBQVk7Ozs7SUF5QnZCLFlBQXdDLE1BQTBCO1FBdkJsRSxXQUFNLEdBQXVCO1lBQzNCLElBQUksRUFBRSxnQkFBZ0I7WUFDdEIsT0FBTyxFQUFFO2dCQUNQLEtBQUssRUFBRSxTQUFTO2dCQUNoQixPQUFPLEVBQUUsRUFBRTtnQkFDWCxPQUFPLEVBQUUsRUFBRTtnQkFDWCxJQUFJLEVBQUUsQ0FBQztnQkFDUCxHQUFHLEVBQUUsSUFBSTtnQkFDVCxLQUFLLEVBQUUsSUFBSTtnQkFDWCxXQUFXLEVBQUUsSUFBSTtnQkFDakIsS0FBSyxFQUFFLElBQUk7Z0JBQ1gsSUFBSSxFQUFFLElBQUk7Z0JBQ1YsY0FBYyxFQUFFLElBQUk7Z0JBQ3BCLFdBQVcsRUFBRSxJQUFJO2dCQUNqQixVQUFVLEVBQUUsS0FBSztnQkFDakIsV0FBVyxFQUFFLEdBQUc7Z0JBQ2hCLFlBQVksRUFBRSxHQUFHO2dCQUNqQixjQUFjLEVBQUUsWUFBWTtnQkFDNUIsY0FBYyxFQUFFLE9BQU87YUFDeEI7U0FDRixDQUFDO1FBQ0YsWUFBTyxHQUFHLElBQUksZUFBZSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUd6QyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQ3hCOzs7O0lBRUQsSUFBSSxJQUFJO1FBQ04sT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQztLQUN6Qjs7OztJQUVELElBQUksY0FBYztRQUNoQixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQztLQUMzQzs7OztJQUVELElBQUksS0FBSztRQUNQLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDO0tBQ2xDOzs7O0lBRUQsSUFBSSxVQUFVO1FBQ1osT0FBTyxTQUFTLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsWUFBWSxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxZQUFZLEVBQUUsQ0FBQztLQUMvRjs7OztJQUVELElBQUksR0FBRztRQUNMLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO0tBQ2hDOzs7O0lBRUQsSUFBSSxLQUFLO1FBQ1AsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUM7S0FDbEM7Ozs7SUFFRCxJQUFJLFdBQVc7UUFDYixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQztLQUN4Qzs7OztJQUVELElBQUksS0FBSztRQUNQLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDO0tBQ2xDOzs7O0lBRUQsSUFBSSxJQUFJO1FBQ04sT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7S0FDakM7Ozs7SUFFRCxJQUFJLFdBQVc7UUFDYixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQztLQUN4Qzs7OztJQUVELElBQUksVUFBVTtRQUNaLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDO0tBQ3ZDOzs7O0lBRUQsSUFBSSxJQUFJO1FBQ04sT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7S0FDakM7Ozs7O0lBRUQsU0FBUyxDQUFDLE1BQTBCO1FBQ2xDLElBQUksTUFBTSxFQUFFO1lBQ1YsSUFBSSxDQUFDLE1BQU0sR0FBRyxTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztZQUM3QyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDaEM7S0FDRjs7Ozs7O0lBRUQsU0FBUyxDQUFDLElBQVksRUFBRSxJQUFrQjs7Y0FDbEMsTUFBTSxHQUFHO1lBQ2IsSUFBSSxvQkFBTSxnQkFBZ0IsRUFBSyxFQUFDLENBQUMsSUFBSSxHQUFHLElBQUksRUFBQyxDQUFDO1NBQy9DO1FBQ0QsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztLQUN4Qjs7O1lBNUZGLFVBQVUsU0FBQztnQkFDVixVQUFVLEVBQUUsTUFBTTthQUNuQjs7Ozs0Q0EwQmMsUUFBUSxZQUFJLE1BQU0sU0FBQyxNQUFNOzs7Ozs7OztBQ2xDeEMsTUE2QmEsY0FBYzs7Ozs7Ozs7Ozs7SUFvQ3pCLFlBQW9CLElBQVUsRUFDVixFQUFjLEVBQ2QsSUFBZ0IsRUFDaEIsUUFBa0IsRUFDbEIsUUFBbUIsRUFDbkIsRUFBcUIsRUFDckIsWUFBMEIsRUFDUixRQUFhO1FBUC9CLFNBQUksR0FBSixJQUFJLENBQU07UUFDVixPQUFFLEdBQUYsRUFBRSxDQUFZO1FBQ2QsU0FBSSxHQUFKLElBQUksQ0FBWTtRQUNoQixhQUFRLEdBQVIsUUFBUSxDQUFVO1FBQ2xCLGFBQVEsR0FBUixRQUFRLENBQVc7UUFDbkIsT0FBRSxHQUFGLEVBQUUsQ0FBbUI7UUFDckIsaUJBQVksR0FBWixZQUFZLENBQWM7UUFDUixhQUFRLEdBQVIsUUFBUSxDQUFLOzs7O1FBckMzQyx1QkFBa0IsR0FBcUIsWUFBWSxDQUFDLEtBQUssQ0FBQzs7OztRQVN6RCxhQUFRLEdBQUcsS0FBSyxDQUFDOzs7O1FBR2pCLGdCQUFXLEdBQVksSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUM7Ozs7UUFHckQsUUFBRyxHQUFXLElBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDO1FBQ3BDLFVBQUssR0FBVyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQztRQUN4QyxnQkFBVyxHQUFXLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDO1FBQ3BELFVBQUssR0FBVyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQztRQUN4QyxTQUFJLEdBQVcsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUM7Ozs7UUFHckMsVUFBSyxHQUFHLElBQUksWUFBWSxFQUFVLENBQUM7Ozs7UUFHbkMsV0FBTSxHQUFHLElBQUksWUFBWSxFQUFVLENBQUM7Ozs7UUFHcEMsV0FBTSxHQUFHLElBQUksWUFBWSxFQUFVLENBQUM7S0FVN0M7Ozs7O0lBSUQsT0FBTztRQUNMLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLEVBQUU7O2tCQUNyQixRQUFRLEdBQUcsSUFBSSxDQUFDLFdBQVcsR0FBRztnQkFDbEMsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHO2dCQUNiLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLENBQUM7Z0JBQ3ZELFdBQVcsRUFBRSxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxnQkFBZ0IsQ0FBQztnQkFDekUsS0FBSyxFQUFFLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLGlCQUFpQixDQUFDLFVBQVUsQ0FBQztnQkFDdkQsR0FBRyxFQUFFLElBQUksQ0FBQyxZQUFZLENBQUMsY0FBYztnQkFDckMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJO2FBQ2hCLEdBQUc7Z0JBQ0YsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHO2dCQUNiLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSztnQkFDakIsV0FBVyxFQUFFLElBQUksQ0FBQyxXQUFXO2dCQUM3QixLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUs7Z0JBQ2pCLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTtnQkFDZixHQUFHLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxjQUFjO2FBQ3RDOzs7WUFJRCxFQUFFLENBQWlCO2dCQUNqQixFQUFFLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhO2dCQUN6QixRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVE7Z0JBQ3ZCLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSTtnQkFDZixFQUFFLEVBQUUsSUFBSSxDQUFDLEVBQUU7Z0JBQ1gsUUFBUSxFQUFFLElBQUksQ0FBQyxRQUFRO2dCQUN2QixRQUFRLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRTtnQkFDNUIsUUFBUTthQUNULENBQUMsQ0FBQyxJQUFJLENBQ0wsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQzVCLEdBQUcsQ0FBQyxDQUFDLFNBQWMsS0FBSyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQzlDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FDUixDQUFDLFNBQVMsRUFBRSxDQUFDO1NBQ2Y7S0FDRjs7Ozs7SUFFRCxXQUFXLENBQUMsT0FBc0I7UUFDaEMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFNBQVMsRUFBRTtZQUUzQixJQUFJLE9BQU8sQ0FBQyxhQUFhLENBQUMsS0FBSyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUMsV0FBVyxJQUFJLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQyxhQUFhLEtBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFO2dCQUMvSCxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO2FBQzFDO1lBRUQsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEtBQUssT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxhQUFhLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUM5RSxJQUFJLENBQUMsR0FBRyxHQUFHLFdBQVcsQ0FDcEIsSUFBSSxDQUFDLFdBQVc7c0JBQ1osSUFBSSxDQUFDLEdBQUcsSUFBSSxJQUFJLENBQUMsaUJBQWlCLENBQUMsUUFBUSxDQUFDO3NCQUM1QyxJQUFJLENBQUMsR0FBRyxFQUNaLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQ3hDLENBQUM7Z0JBQ0YsSUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFO29CQUNwQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxLQUFhLEtBQUssSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztpQkFDaEY7YUFDRjtTQUNGO0tBQ0Y7Ozs7SUFFRCxXQUFXO1FBQ1QsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFdBQVcsRUFBRSxDQUFDO0tBQ3ZDOzs7Ozs7SUFNRCxLQUFLLENBQUMsR0FBVztRQUNmLElBQUksR0FBRyxFQUFFOztZQUdQLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxVQUFVLElBQUksb0JBQU0sSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLElBQUUsRUFBRSxFQUFFO2dCQUN2RSxvQkFBTSxJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsSUFBRSxFQUFFLENBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2FBQzFGOztZQUdELElBQUksQ0FBQyxrQkFBa0IsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxXQUFXLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FDL0csR0FBRyxDQUFDLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUMzQyxTQUFTLENBQUMsQ0FBQyxLQUFVLEtBQUssUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQzdFLFFBQVEsQ0FBQyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FDakQsQ0FBQyxTQUFTLEVBQUUsQ0FBQztTQUNmO0tBQ0Y7Ozs7O0lBRUQsVUFBVSxDQUFDLFFBQWdCOztjQUNuQixPQUFPLEdBQWdCLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSztRQUM1QyxPQUFPLE9BQU8sQ0FBQyxPQUFPLEtBQUssT0FBTzs7O2dCQUdoQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBTSxPQUFPLENBQUMsR0FBRyxHQUFHLFFBQVEsRUFBRSxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQzNELEdBQUcsT0FBTyxDQUFDLFNBQVMsRUFDcEIsVUFBVSxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQ3hCOzs7Z0JBR0QsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQU0sT0FBTyxDQUFDLEdBQUcsR0FBRyxRQUFRLEVBQUUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FDM0QsR0FBRyxPQUFPLENBQUMsU0FBUyxFQUNwQixVQUFVLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FDeEIsQ0FBQztLQUNMOzs7OztJQUVPLGlCQUFpQixDQUFDLFdBQW1COztjQUVyQyxNQUFNLHFCQUFxQixJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUVyRSxJQUFJLE1BQU0sRUFBRTs7WUFFVixJQUFJLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQzs7WUFHbkIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLEVBQUUsTUFBTSxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBQzs7WUFHNUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLEVBQUUsTUFBTSxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQzs7WUFHbkUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDOztZQUczRSxJQUFJLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUM7O1lBR2hDLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxFQUFFLFlBQVksRUFBRSxNQUFNLENBQUMsU0FBUyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUNsRzthQUFNO1lBQ0wsTUFBTSxJQUFJLEtBQUssQ0FBQyxxQ0FBcUMsV0FBVyxtQkFBbUIsQ0FBQyxDQUFDO1NBQ3RGO0tBQ0Y7Ozs7OztJQUdPLGlCQUFpQixDQUFDLEdBQVc7O2NBQzdCLGlCQUFpQixHQUFvQixJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLEdBQUcsR0FBRyxDQUFDO1FBQ2hGLElBQUksaUJBQWlCO1lBQUUsT0FBTyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUM7O2NBQ2xFLGFBQWEsR0FBb0IsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxHQUFHLEdBQUcsQ0FBQztRQUN4RSxJQUFJLGFBQWE7WUFBRSxPQUFPLGFBQWEsQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUM7S0FDakU7Ozs7SUFFTyxXQUFXO1FBQ2pCLElBQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHO1lBQUUsT0FBTyxLQUFLLENBQUM7UUFDcEMsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU87WUFBRSxPQUFPLFNBQVMsQ0FBQztRQUM1QyxPQUFPLFNBQVMsQ0FBQztLQUNsQjs7O1lBN0xGLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsK0JBQStCO2FBQzFDOzs7O1lBWlEsSUFBSTtZQU5YLFVBQVU7WUFLSCxVQUFVO1lBRVYsUUFBUTtZQU5mLFNBQVM7WUFDVCxpQkFBaUI7WUFVVixZQUFZOzRDQWtETixNQUFNLFNBQUMsUUFBUTs7OzBCQS9CM0IsS0FBSzt1QkFHTCxLQUFLOzBCQUdMLEtBQUs7a0JBR0wsS0FBSztvQkFDTCxLQUFLOzBCQUNMLEtBQUs7b0JBQ0wsS0FBSzttQkFDTCxLQUFLO29CQUdMLE1BQU07cUJBR04sTUFBTTtxQkFHTixNQUFNO3NCQWFOLFlBQVksU0FBQyxPQUFPOzs7Ozs7O0FDNUV2QixNQU1hLGNBQWM7Ozs7OztJQUN6QixTQUFTLENBQUMsR0FBVyxFQUFFLE1BQWU7UUFDcEMsT0FBTyxtQkFBbUIsQ0FBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLENBQUM7S0FDekM7OztZQU5GLElBQUksU0FBQztnQkFDSixJQUFJLEVBQUUsWUFBWTthQUNuQjs7Ozs7OztBQ0xELE1Bb0JhLFdBQVc7Ozs7O0lBQ3RCLE9BQU8sT0FBTyxDQUFDLE1BQTJCO1FBQ3hDLE9BQU87WUFDTCxRQUFRLEVBQUUsV0FBVztZQUNyQixTQUFTLEVBQUU7Z0JBQ1QsRUFBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUM7YUFDcEM7U0FDRixDQUFDO0tBQ0g7OztZQXJCRixRQUFRLFNBQUM7Z0JBQ1IsT0FBTyxFQUFFO29CQUNQLGNBQWM7aUJBQ2Y7Z0JBQ0QsWUFBWSxFQUFFO29CQUNaLGNBQWM7b0JBQ2QsY0FBYztpQkFDZjtnQkFDRCxPQUFPLEVBQUU7b0JBQ1AsY0FBYztvQkFDZCxjQUFjO2lCQUNmO2FBQ0Y7Ozs7Ozs7Ozs7Ozs7OzsifQ==